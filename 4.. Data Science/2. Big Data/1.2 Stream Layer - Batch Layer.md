
![[Pasted image 20241214232612.png]]

### Giải thích chi tiết file script

Đây là một script chạy các thành phần của hệ thống **Big Data**, gồm hai phần chính:
1. **Stream Layer (Xử lý dữ liệu thời gian thực).**
2. **Batch Layer (Xử lý dữ liệu theo lô).**

---

### **Chi tiết từng phần**

#### **1. Stream Layer**
Phần này khởi động và thiết lập các công cụ để xử lý dữ liệu thời gian thực.

| **Lệnh**                                                                                           | **Chức năng**                                                                                                                                 |
|----------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| `zookeeper-server-start.bat C:/kafka_2.13_2.6.0/config/zookeeper.properties`                       | Khởi động **Zookeeper**, một dịch vụ hỗ trợ quản lý các cluster Kafka.                                                                      |
| `kafka-server-start.bat C:/kafka_2.13_2.6.0/config/server.properties`                              | Khởi động **Kafka server**, dịch vụ xử lý dữ liệu streaming (luồng dữ liệu).                                                                |
| `kafka-topics.bat --create --topic smartphoneTopic --bootstrap-server localhost:9092`              | Tạo một **topic** trong Kafka tên là `smartphoneTopic`.                                                                                     |
| `kafka-console-producer.bat --topic smartphoneTopic --bootstrap-server localhost:9092`             | Khởi chạy **producer** để gửi dữ liệu vào topic `smartphoneTopic`.                                                                          |
| `kafka-console-consumer.bat --topic smartphoneTopic --from-beginning --bootstrap-server localhost:9092` | Khởi chạy **consumer** để nhận và xử lý dữ liệu từ topic `smartphoneTopic`.                                                                 |
| `start-all`                                                                                        | Khởi động HDFS (Hadoop Distributed File System) và YARN (công cụ quản lý tài nguyên).                                                       |
| `hbase shell`                                                                                      | Mở **HBase shell** để tương tác với HBase, cơ sở dữ liệu NoSQL dùng lưu trữ dữ liệu thời gian thực.                                         |
| `hbase thrift start`                                                                               | Khởi chạy **Thrift server**, cho phép các ứng dụng bên ngoài kết nối với HBase thông qua API.                                               |

---

#### **2. Batch Layer**
Phần này dùng để xử lý dữ liệu theo lô, thường áp dụng cho các phân tích lớn và lưu trữ dữ liệu lịch sử.

| **Lệnh**                                                                                           | **Chức năng**                                                                                                                                 |
|----------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| `docker-compose up -d`                                                                             | Khởi chạy Apache **Airflow** (công cụ lập lịch trình và điều phối các luồng công việc) bằng Docker.                                          |
| `spark-shell`                                                                                      | Mở **Spark Shell** để thực hiện các tác vụ xử lý dữ liệu lớn theo lô.                                                                        |
| `zookeeper-server-start.bat C:/kafka_2.13_2.6.0/config/zookeeper.properties`                       | (Tương tự Stream Layer) Khởi động **Zookeeper** để quản lý Kafka cluster.                                                                   |
| `kafka-server-start.bat C:/kafka_2.13_2.6.0/config/server.properties`                              | (Tương tự Stream Layer) Khởi động Kafka server để xử lý luồng dữ liệu.                                                                      |
| `kafka-console-producer.bat --topic smartphoneTopic --bootstrap-server localhost:9092`             | (Tương tự Stream Layer) Khởi chạy producer để gửi dữ liệu vào Kafka.                                                                        |
| `kafka-console-consumer.bat --topic smartphoneTopic --from-beginning --bootstrap-server localhost:9092` | (Tương tự Stream Layer) Khởi chạy consumer để nhận dữ liệu từ Kafka.                                                                        |
| `start-all`                                                                                        | Khởi động HDFS và YARN (giống Stream Layer).                                                                                                |

---

### **Tóm tắt các thành phần**

| **Thành phần**      | **Vai trò**                                                                                                                                                          |
|---------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Zookeeper**       | Quản lý trạng thái Kafka Cluster và điều phối các node trong cluster.                                                                                              |
| **Kafka**           | Hệ thống xử lý dữ liệu luồng, dùng để lưu trữ và truyền dữ liệu giữa các hệ thống khác nhau.                                                                         |
| **HDFS**            | Hệ thống lưu trữ phân tán, lưu dữ liệu để xử lý trong Batch Layer.                                                                                                 |
| **YARN**            | Quản lý tài nguyên trong cluster Hadoop (quản lý CPU, RAM cho các tác vụ).                                                                                         |
| **HBase**           | Cơ sở dữ liệu NoSQL lưu trữ dữ liệu thời gian thực (real-time view).                                                                                               |
| **Thrift Server**   | Dịch vụ giao tiếp với HBase qua các giao thức như HTTP hoặc RPC.                                                                                                   |
| **Airflow**         | Điều phối các tác vụ (ví dụ: xử lý theo lô, ETL).                                                                                                                   |
| **Spark**           | Công cụ xử lý dữ liệu lớn, dùng để tính toán và phân tích dữ liệu trong Batch Layer.                                                                                |

---

### **Cách hoạt động tổng quan**
1. **Stream Layer**:
   - Kafka nhận và xử lý dữ liệu thời gian thực (dữ liệu smartphone).
   - Dữ liệu được lưu tạm trong Kafka, rồi ghi vào HBase (lưu trữ real-time view).

2. **Batch Layer**:
   - Dữ liệu từ Kafka hoặc HDFS được xử lý theo lô bằng Spark.
   - Airflow quản lý các quy trình ETL và chuyển kết quả vào cơ sở dữ liệu khác để phân tích.

---

### **Lưu ý**
- **Đường dẫn cụ thể** (`C:/kafka_2.13_2.6.0`) phải được thay đổi tùy vào hệ thống của bạn.
- **Docker Compose**: Airflow chạy trong container, vì vậy cần Docker được cài đặt trước.

Dưới đây là giải thích **cực kỳ đơn giản** về các công cụ trong hệ thống Big Data, được trình bày dưới dạng bảng để dễ hiểu:

---

### **1. Apache Kafka**

|**Công cụ**|**Apache Kafka**|
|---|---|
|**Chức năng chính**|Chuyển dữ liệu giữa các hệ thống theo thời gian thực (giống như bưu điện chuyển thư).|
|**Thành phần**|- **Producer**: Gửi dữ liệu vào hệ thống.- **Consumer**: Lấy dữ liệu ra từ hệ thống.- **Topic**: "Hộp thư" chứa dữ liệu.|
|**Ví dụ dễ hiểu**|Khi bạn nhắn tin qua Messenger, Kafka giống như hệ thống chuyển tin nhắn từ người gửi đến người nhận.|
|**Vai trò**|- Lưu và chuyển dữ liệu.- Xử lý dữ liệu luồng (streaming).|

---

### **2. Zookeeper**

|**Công cụ**|**Apache Zookeeper**|
|---|---|
|**Chức năng chính**|Quản lý các dịch vụ trong hệ thống phân tán (giống như "quản gia" của Kafka).|
|**Vai trò**|- Quản lý thông tin của Kafka Cluster.- Đảm bảo các node (máy tính) trong hệ thống phối hợp nhịp nhàng.|
|**Ví dụ dễ hiểu**|Giống như "điều phối viên" của một đội bóng đá, giúp các cầu thủ phối hợp ăn ý.|

---

### **3. HDFS (Hadoop Distributed File System)**

|**Công cụ**|**HDFS**|
|---|---|
|**Chức năng chính**|Lưu trữ dữ liệu lớn trên nhiều máy tính (giống như một ổ cứng khổng lồ).|
|**Cách hoạt động**|- Dữ liệu được chia nhỏ thành các mảnh nhỏ (blocks).- Các mảnh nhỏ này được lưu trên nhiều máy.|
|**Ví dụ dễ hiểu**|Giống như khi bạn lưu một bộ phim dài trên nhiều USB khác nhau để tiết kiệm dung lượng.|
|**Vai trò**|- Lưu trữ dữ liệu lớn như file log, video, dữ liệu cảm biến,...|

---

### **4. YARN (Yet Another Resource Negotiator)**

|**Công cụ**|**YARN**|
|---|---|
|**Chức năng chính**|Quản lý tài nguyên (CPU, RAM) cho các tác vụ (giống như "quản lý tài nguyên máy chủ").|
|**Cách hoạt động**|- Khi một ứng dụng cần tài nguyên, YARN sẽ cấp phát tài nguyên đó.- Đảm bảo mọi tác vụ đều chạy ổn định.|
|**Ví dụ dễ hiểu**|Giống như quản lý nhà bếp trong nhà hàng, phân chia bếp và nguyên liệu cho từng món ăn.|

---

### **5. HBase**

|**Công cụ**|**HBase**|
|---|---|
|**Chức năng chính**|Cơ sở dữ liệu NoSQL, lưu trữ và truy vấn dữ liệu lớn theo thời gian thực.|
|**Cách hoạt động**|- Lưu dữ liệu dưới dạng bảng, nhưng hỗ trợ lưu trữ và truy vấn nhanh chóng.- Tích hợp tốt với HDFS.|
|**Ví dụ dễ hiểu**|Giống như một bảng tính Excel khổng lồ, có thể ghi và đọc dữ liệu cực nhanh.|
|**Vai trò**|Lưu trữ dữ liệu thời gian thực như giá cổ phiếu, cảm biến IoT,...|

---

### **6. Apache Spark**

|**Công cụ**|**Apache Spark**|
|---|---|
|**Chức năng chính**|Xử lý dữ liệu lớn cực nhanh, hỗ trợ cả thời gian thực và theo lô (batch processing).|
|**Thành phần chính**|- Spark Core: Xử lý dữ liệu.- Spark SQL: Truy vấn dữ liệu dạng SQL.- Spark Streaming: Xử lý dữ liệu thời gian thực.|
|**Ví dụ dễ hiểu**|Giống như một đầu bếp tốc độ cao, có thể nấu nhiều món ăn (dữ liệu) trong thời gian ngắn.|
|**Vai trò**|- Phân tích dữ liệu lớn.- Tính toán nhanh chóng.|

---

### **7. Apache Airflow**

|**Công cụ**|**Apache Airflow**|
|---|---|
|**Chức năng chính**|Quản lý và tự động hóa các luồng công việc (workflow).|
|**Cách hoạt động**|- Bạn định nghĩa các tác vụ (tasks) và thứ tự chạy của chúng.- Airflow sẽ tự động chạy các tác vụ này theo lịch trình.|
|**Ví dụ dễ hiểu**|Giống như một người quản lý dự án, sắp xếp công việc cho từng thành viên và đảm bảo mọi thứ đúng hạn.|
|**Vai trò**|- Lập lịch và điều phối các tác vụ ETL (Extract, Transform, Load).|

---

### **Tóm tắt bảng tổng quan**

|**Công cụ**|**Vai trò chính**|**Ví dụ dễ hiểu**|
|---|---|---|
|Kafka|Chuyển dữ liệu giữa các hệ thống theo thời gian thực.|Chuyển tin nhắn Messenger giữa người gửi và người nhận.|
|Zookeeper|Điều phối và quản lý Kafka cluster.|Quản lý đội bóng đá để các cầu thủ phối hợp hiệu quả.|
|HDFS|Lưu trữ dữ liệu lớn trên nhiều máy.|Lưu file phim lớn trên nhiều USB khác nhau.|
|YARN|Quản lý tài nguyên (CPU, RAM) cho các ứng dụng.|Quản lý nhà bếp, phân chia bếp cho từng món ăn.|
|HBase|Lưu trữ và truy vấn dữ liệu lớn theo thời gian thực.|Một bảng tính Excel khổng lồ, truy vấn siêu nhanh.|
|Spark|Xử lý dữ liệu lớn nhanh chóng, hỗ trợ thời gian thực và theo lô.|Đầu bếp tốc độ cao nấu nhiều món cùng lúc.|
|Airflow|Quản lý và tự động hóa các luồng công việc.|Quản lý dự án, sắp xếp và tự động hóa công việc.|

---

Nếu bạn cần thêm thông tin hoặc giải thích cụ thể về cách sử dụng, mình sẵn sàng hỗ trợ! 😊


Dưới đây là bảng tổng hợp thông tin các **port** trong HDFS và chức năng của chúng:

|**Công cụ/Thành phần**|**Port**|**Chức năng**|
|---|---|---|
|**NameNode RPC**|`8020`|Giao tiếp chính giữa NameNode và client hoặc các DataNode.|
|**NameNode Web Interface**|`9870`|Giao diện quản trị web của NameNode (truy cập thông tin cluster qua trình duyệt).|
|**DataNode IPC**|`50020`|Giao tiếp chính giữa DataNode và NameNode.|
|**DataNode Web Interface**|`9864`|Giao diện quản trị web của DataNode (thông tin block, dung lượng).|
|**Secondary NameNode Web**|`9868`|Giao diện web của Secondary NameNode (nếu có).|
|**YARN ResourceManager RPC**|`8032`|Giao tiếp giữa ResourceManager và các NodeManager hoặc client (trong YARN).|
|**YARN Web Interface**|`8088`|Giao diện web quản trị ResourceManager.|
|**NodeManager Web Interface**|`8042`|Giao diện web của NodeManager (trong YARN).|

### Lưu ý:

1. Các port trên có thể được thay đổi trong file cấu hình của Hadoop (`core-site.xml`, `hdfs-site.xml`, `yarn-site.xml`).
2. Mặc định, tất cả giao diện web và giao tiếp RPC đều hoạt động trên **HTTP** hoặc **HTTPS** nếu được bật.
3. Đảm bảo các port được mở trong tường lửa để các thành phần của cluster có thể kết nối được.

Nếu cần thêm thông tin chi tiết về cách cấu hình, hãy cho mình biết nhé!