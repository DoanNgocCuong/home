
---
# 2. Dọn docker đã dừng 


```bash
# Xóa các networks không sử dụng 
docker network prune 
# Hoặc xóa toàn bộ các resources không sử dụng 
docker system prune -a
```

Tôi sẽ giúp bạn dừng port 30005 đang bị conflict. Hãy kiểm tra và dừng container/process đang sử dụng port này:
Read file: CKP_v1/tuning/deploy.sh
Bây giờ tôi sẽ hướng dẫn bạn các lệnh để dừng port 30005:

**Các lệnh để dừng port 30005:**

**1. Kiểm tra container Docker đang chạy:**
```bash
docker ps
```

**2. Dừng container đang sử dụng port 30005:**
```bash
docker stop $(docker ps -q --filter "publish=30005")
```

**3. Hoặc dừng tất cả container:**
```bash
docker stop $(docker ps -q)
```

**4. Xóa container nếu cần:**
```bash
docker rm $(docker ps -aq --filter "publish=30005")
```

**5. Kiểm tra process nào đang sử dụng port 30005:**
```bash
sudo lsof -i :30005
```

**6. Kill process theo PID (nếu có):**
```bash
sudo kill -9 <PID>
```

**7. Hoặc kill tất cả process trên port 30005:**
```bash
sudo fuser -k 30005/tcp
```

**Lệnh tổng hợp để clear port 30005:**
```bash
# Dừng container Docker
docker stop $(docker ps -q --filter "publish=30005") 2>/dev/null || true

# Kill process trên port
sudo fuser -k 30005/tcp 2>/dev/null || true

# Kiểm tra port đã free chưa
sudo lsof -i :30005
```

**Sau khi dừng port, bạn có thể chạy lại:**
```bash
./deploy.sh
```

**Lưu ý:** Tôi thấy trong file `deploy.sh` có lỗi syntax ở dòng 16 (`--api-key hoailb-vllm \` thiếu dấu `\` ở cuối dòng 15).