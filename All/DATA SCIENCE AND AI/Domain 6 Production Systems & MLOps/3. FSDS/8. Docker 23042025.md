- wsl c√≥ ph·∫£i ko ·∫°, hay ko ·∫°

```
Ng√†y tr∆∞·ªõc em c√≥ note l√∫c h·ªçc  
---  
- Virtualization: Virtualization g·∫∑p v·∫•n ƒë·ªÅ v·ªÅ l√£ng ph√≠ t√†i nguy√™n v√† th·ªùi gian. T√†i nguy√™n nh∆∞ RAM ƒë∆∞·ª£c ph√¢n b·ªï c·ªë ƒë·ªãnh cho m·ªói m√°y ·∫£o, d·∫´n ƒë·∫øn l√£ng ph√≠ n·∫øu m√°y ·∫£o kh√¥ng s·ª≠ d·ª•ng h·∫øt t√†i nguy√™n ƒë√≥ + Th·ªùi gian kh·ªüi ƒë·ªông m√°y ·∫£o ƒë·∫øn v√†i ph√∫t  
¬† ¬†  
- Containerlization: ƒê√≥ng g√≥i ph·∫ßn m·ªÅm v√† ph·ª• thu·ªôc v√†o 1 container ri√™ng bi·ªát. **Docker** l√† m·ªôt n·ªÅn t·∫£ng m√£ ngu·ªìn m·ªü ph·ªï bi·∫øn nh·∫•t ƒë·ªÉ t·∫°o, tri·ªÉn khai v√† qu·∫£n l√Ω c√°c container.  
¬† ¬†  
¬† ¬† - Tri·ªÉn khai m√¥i tr∆∞·ªùng nhanh ch√≥ng, gi·∫£m xung ƒë·ªôt (gi·ªØa c√°c g√≥i requirements: th∆∞ vi·ªán, m√£ ngu·ªìn, c·∫•u h√¨nh, c√°c h·ªá ƒëi·ªÅu h√†nh, ¬Ö)  
¬† ¬† - T√≠nh t∆∞∆°ng th√≠ch v·ªõi c·∫£ 3 h·ªá ƒëi·ªÅu h√†nh: Window, MacOS, Ubutun  
¬† ¬†  
¬† ¬† (Ban ƒë·∫ßu, Docker ch·ªß y·∫øu h·ªó tr·ª£ c√°c container Linux. Tuy nhi√™n, hi·ªán nay Docker c≈©ng h·ªó tr·ª£ ch·∫°y c√°c container Windows khi ƒëang ch·∫°y tr√™n h·ªá ƒëi·ªÅu h√†nh Windows)
```

docker deploy 1 m√°y 
k8s nhi·ªÅu m√°y 

```
mn ƒëang n√≥i t·ªõi ƒë√¢u em ch∆∞a hi·ªÉu l·∫Øm, v·∫≠y l√† docker th√¨ l√† cho d√πng local c√≤n k8s l√† cho production ·∫°?
L√† do khi l√™n production c·∫ßn co gi√£n khi user tƒÉng gi·∫£m ƒë√∫ng h√¥ng ·∫°.

1. Docker ch·∫°y tr√™n 1 m√°y, l·ª° m√°y die th√¨ sao 
2. 
```

```
K8s tr√™n cloud n√≥ charge ti·ªÅn qu·∫£n l√Ω theo gi·ªù m√† , 1 gi·ªù 0.1$ 1 th√°ng 72$ c≈©ng khoai ƒë·∫•y =))
```

```
Th∆∞·ªùng b√™n ngo√†i ng∆∞·ªùi ta chu·ªông x√†i ECS, EKS, hay t·ª± d·ª±ng instance nh·ªâ hay l√† t√πy d·ª± √°n
```

[On-Demand Vs. Spot Instances: What‚Äôs The Difference?](https://www.cloudzero.com/blog/on-demand-vs-spot-instances/)

Mini kube phi√™n b·∫£n nh·ªè h∆°n c·ªßa k8s

Docker 1 m√°y r·ªßi ro qu√° cao => tri·ªÉn khai tr√™n nhi·ªÅu m√°y => chuy·ªÉn sang k8s

## Virtualization hi·ªán nay mn c√≤n x√†i ko ·∫°, n√≥ c√≥ ƒëi·ªÉm n√†o tr·ªôi h∆°n so v·ªõi container kh√¥ng ·∫°

Tuy·ªát v·ªùi lu√¥n, Qu·ªëc ∆°i! C√¢u h·ªèi c·ªßa b·∫°n ƒë√£ m·ªü ra m·ªôt mini di·ªÖn ƒë√†n c√¥ng ngh·ªá thu nh·ªè üòÑ M√¨nh t·ªïng h·ª£p l·∫°i √Ω ki·∫øn c√°c anh em v√† b·ªï sung ph√¢n t√≠ch ƒë·ªÉ b·∫°n (v√† c·∫£ team) hi·ªÉu s√¢u h∆°n:

---

## üí° **Virtualization: V·∫´n s·ªëng kho·∫ª v√† c√≥ ƒë·∫•t d·ª•ng v√µ!**

T·ª´ ph·∫£n h·ªìi c·ªßa m·ªçi ng∆∞·ªùi:

- **FPT Software (Fsoft)** d√πng **VMware Horizon** ƒë·ªÉ cho ph√©p nh√¢n vi√™n **l√†m remote an to√†n**, truy c·∫≠p m√¥i tr∆∞·ªùng l√†m vi·ªác qua m√°y ·∫£o.
    
- **M·ªôt s·ªë c√¥ng ty kh√¥ng d√πng cloud**, n√™n h·ªç ph·∫£i **d·ª±ng h·∫° t·∫ßng ri√™ng (on-premise)** ‚Üí x√†i **VMware, OpenStack, OpenShift**, v√† c√°c c√¥ng ngh·ªá ·∫£o h√≥a kh√°c.
    
- Trong m√¥i tr∆∞·ªùng h·ªçc t·∫≠p nh∆∞ **qu·∫£n tr·ªã m·∫°ng, h·ªçc C#**, th√¨ **VMware** v·∫´n l√† c√¥ng c·ª• quen thu·ªôc.
    

üëâ **T√≥m l·∫°i**: Virtualization kh√¥ng l·ªói th·ªùi ‚Äì m√† l√† **gi·∫£i ph√°p ƒë∆∞·ª£c ch·ªçn khi c·∫ßn:**

- B·∫£o m·∫≠t cao
    
- C√¥ l·∫≠p tuy·ªát ƒë·ªëi
    
- Tri·ªÉn khai tr√™n h·∫° t·∫ßng ri√™ng
    
- H·ªó tr·ª£ nhi·ªÅu OS song song
    

---

## ‚öîÔ∏è **Virtual Machine vs. Container ‚Äì So k√®o k·ªπ h∆°n**

|Y·∫øu t·ªë|Virtual Machine (VM)|Container (Docker, Podman, ...)|
|---|---|---|
|**Hi·ªáu nƒÉng**|T·ªën RAM, CPU h∆°n v√¨ ch·∫°y full OS|Nh·∫π, kh·ªüi ƒë·ªông nhanh, √≠t t√†i nguy√™n|
|**Th·ªùi gian kh·ªüi t·∫°o**|Ch·∫≠m h∆°n (v√†i gi√¢y ‚Üí ph√∫t)|R·∫•t nhanh (v√†i mili-gi√¢y ‚Üí gi√¢y)|
|**T√≠nh c√¥ l·∫≠p**|M·ªói VM c√≥ OS ri√™ng ‚Üí r·∫•t an to√†n|D√πng chung kernel ‚Üí b·∫£o m·∫≠t th·∫•p h∆°n m·ªôt ch√∫t|
|**T√≠nh linh ho·∫°t**|C√≥ th·ªÉ ch·∫°y nhi·ªÅu lo·∫°i OS tr√™n c√πng host|Ph·ª• thu·ªôc h·ªá ƒëi·ªÅu h√†nh host|
|**Kh·∫£ nƒÉng scale**|Kh√≥ v√† t·ªën k√©m|Scale d·ªÖ d√†ng v·ªõi orchestrator nh∆∞ Kubernetes|
|**DevOps / CI/CD**|Kh√¥ng th√¢n thi·ªán b·∫±ng container|Container l√† core c·ªßa Cloud Native, DevOps pipelines|
|**Security (Zero Trust)**|M·∫°nh h∆°n n·∫øu c·∫•u h√¨nh ƒë√∫ng|Ph√π h·ª£p h∆°n khi g·∫Øn v·ªõi c√°c layer b·∫£o m·∫≠t ph√≠a ngo√†i (network policy, runtime scanning...)|

---

## üîÑ **Th·ª±c t·∫ø: D√πng k·∫øt h·ª£p l√† xu h∆∞·ªõng ch√≠nh**

Nh∆∞ b·∫°n Son Le n√≥i r·∫•t chu·∫©n:

> ‚ÄúB·∫°n ƒëang d√πng c·∫£ 2 m√† kh√¥ng bi·∫øt ƒë√≥ th√¥i, VM l√† h·∫° t·∫ßng, Container l√† t·∫ßng ·ª©ng d·ª•ng.‚Äù

V√≠ d·ª•:

- **Cloud (AWS/GCP/Azure)** ƒë·ªÅu d√πng **·∫£o h√≥a ƒë·ªÉ t·∫°o VM**, sau ƒë√≥ b·∫°n **d√πng VM ƒë·ªÉ ch·∫°y Docker/Kubernetes**.
    
- **CI/CD pipeline** c·ªßa c√¥ng ty b·∫°n c√≥ th·ªÉ build trong Docker, deploy l√™n VM (cloud or on-premise).
    

---

## üìå **Khi n√†o n√™n ch·ªçn Virtualization thay v√¨ Container?**

- C·∫ßn ch·∫°y **ph·∫ßn m·ªÅm c≈©**, kh√¥ng t∆∞∆°ng th√≠ch v·ªõi container.
    
- **Y√™u c·∫ßu b·∫£o m·∫≠t cao**, kh√¥ng th·ªÉ share kernel.
    
- Ph·∫£i d√πng **nhi·ªÅu OS kh√°c nhau**, v√≠ d·ª• test Win/Linux song song.
    
- L√†m vi·ªác trong m√¥i tr∆∞·ªùng **offline ho·∫∑c m·∫°ng n·ªôi b·ªô**, kh√¥ng k·∫øt n·ªëi cloud.
    

---

## ‚úÖ L·ªùi khuy√™n cho b·∫°n Qu·ªëc:

N·∫øu b·∫°n l√†m **backend microservices**, h·ªçc DevOps, AI hay web app, th√¨:

- T·∫≠p trung h·ªçc **container h√≥a (Docker)** v√† **orchestration (Kubernetes)**.
    

Nh∆∞ng n·∫øu b·∫°n mu·ªën hi·ªÉu ki·∫øn tr√∫c h·∫° t·∫ßng v·ªØng h∆°n ho·∫∑c l√†m vi·ªác t·∫°i c√°c c√¥ng ty enterprise (ng√¢n h√†ng, vi·ªÖn th√¥ng...), th√¨:

- T√¨m hi·ªÉu th√™m v·ªÅ **Virtualization stack: VMware, Hyper-V, KVM, Proxmox**, v√† th·∫≠m ch√≠ **OpenStack**.
    

---

N·∫øu b·∫°n c·∫ßn m√¨nh vi·∫øt gi√∫p m·ªôt b√†i "Discussion post" cho nh√≥m lu√¥n th√¨ m√¨nh s·∫µn s√†ng nh√©! Ho·∫∑c n·∫øu b·∫°n mu·ªën m√¥ ph·ªèng ki·∫øn tr√∫c "VM host ‚Äì Docker inside ‚Äì App stack", m√¨nh v·∫Ω s∆° ƒë·ªì cho b·∫°n lu√¥n.

```
**Dockerfile - Docker Image - Docker Container**
    
    - **Dockerfile** gi·ªëng nh∆∞ b·∫£n v·∫Ω thi·∫øt k·∫ø ng√¥i nh√†, ghi r√µ c·∫ßn nh·ªØng g√¨ ƒë·ªÉ x√¢y d·ª±ng ng√¥i nh√†. Dockerfile ƒë·ªãnh nghƒ©a c·∫•u h√¨nh v√† c√°c b∆∞·ªõc c·∫ßn thi·∫øt ƒë·ªÉ x√¢y d·ª±ng m·ªôt Docker Image.
    - **Docker Image** l√† ng√¥i nh√† ƒë√£ ƒë∆∞·ª£c x√¢y xong nh∆∞ng ch∆∞a c√≥ ai ·ªü. N√≥ ch·ª©a t·∫•t c·∫£ c√°c th√†nh ph·∫ßn c·∫ßn thi·∫øt ƒë·ªÉ ch·∫°y ·ª©ng d·ª•ng.
    - **Docker Container** l√† ng√¥i nh√† c√≥ ng∆∞·ªùi ·ªü v√† ƒëang ho·∫°t ƒë·ªông. Khi "m·ªü" Docker Image, b·∫°n s·∫Ω c√≥ m·ªôt Docker Container - ng√¥i nh√† ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng.
```


![[Pasted image 20250423205526.png]]

Registry: N∆°i m√† login v√†o r·ªìi mn share ƒë∆∞·ª£c v·ªõi nhau. T√ÄU CH·ª®A R·∫§T NHI·ªÄU - chplay c·ªßa docker :D
registry l√† trung t√¢m chuy·ªÉn giao c√¥ng ngh·ªá
docker pull k√©o v·ªÅ, build, run. docker file khung - images ƒë√£ build xong - container khi n√≥ c√≥ ng∆∞·ªùi v√†o ·ªü r·ªìi ho·∫∑c l√† ·ª©ng d·ª•ng ƒë√£ run 

```
h·ªçc xong docker quen r·ªìi th√¨ khuy·∫øn kh√≠ch m·ªçi ng∆∞·ªùi d√πng th·ª≠ orbstack  
  
**You** 9:03 PM  
l√† g√¨ th·∫ø ·∫°  
  
**Th·∫ø T√†i** 9:04 PM  
E c≈©ng ƒëang d√πng orbstack tr√™n Mac, ch∆∞a th·∫•y kh√°c g√¨ docker nhma e b·ªã th·∫±ng b·∫°n d·ª• d√πng üôÇ  
  
**Son Le** 9:04 PM  
h√†ng ra sau th√¥i fen, nhanh x·ªãn m·ªãn h∆°n =))
```
- [Post-installation steps | Docker Docs](https://docs.docker.com/engine/install/linux-postinstall/)
- hub.docker.com/_/python
- bullseye ƒë·∫ßy ƒë·ªß nh·∫•t 
- alpine3 thi·∫øu 1 s·ªë lybrary c√≥ s·∫µn. 

```
ch·∫≥ng h·∫°n trong l√∫c dev em x√†i python 3.12 (x√†i requirements.txt ·ªü 3.12)  
---  
L√∫c docker em vi·∫øt python3.9 th√¨ c√≥ kh·∫£ nƒÉng x·∫£y ra ko t∆∞∆°ng th√≠ch v·ªõi requirements ƒë√∫ng ko ·∫°
```

```
LABEL maintainer = ""
LABEL org...
```

```
ARG MLFLOW_VERSION

Slim l√† thƒÉng best practices ·∫°

apt-get install build-essential

ENTRYPOINT [mlflow, server] l√† g√¨ ·∫°

ENTRYPOINT [mlflow, server] l√† g√¨ ·∫°  
  
**Vu** ¬†to ¬†Everyone 9:18 PM  
Ch·ªó entrypoint, Mlflow v·ªõi server l√† c√°i g√¨ ·∫°  
  
**TienToan** ¬†to ¬†Everyone 9:19 PM  
l√†m th·∫ø n√†o ƒë·ªÉ Define entrypoint v√† cmd ·∫° ?  
  
**Nghƒ©a Hu·ª≥nh Ho√†ng Trung** ¬†to ¬†Everyone 9:20 PM  
ENTRYPOINT kh√°c CMD vs RUN ch·ªï n√†o th·∫ø s√≠p  
  
**Trung Nguyen (trung061204)** ¬†to ¬†Everyone 9:20 PM  
vay Entrypoint khac gi cmd a  
  
**Vu** ¬†to ¬†Everyone 9:20 PM  
Ph·∫£i khai b√°o ‚Äúpython‚Äù th√¨ n√≥ m·ªõi ch·∫°y dc file .py ·∫°?  
  
**Phong Dang** 9:21 PM  
t·∫°i sao entry point kh√¥ng l√† ["python ./main.py"]
```

C√¢u h·ªèi c·ªßa b·∫°n xoay quanh Dockerfile v√† c√°ch s·ª≠ d·ª•ng `ENTRYPOINT`, `CMD`, v√† m·ªôt s·ªë l·ªánh kh√°c nh∆∞ `RUN` hay `apt-get install`. D∆∞·ªõi ƒë√¢y l√† ph·∫ßn gi·∫£i th√≠ch chi ti·∫øt, d·ªÖ hi·ªÉu:

---

### üß± `ENTRYPOINT [mlflow, server]` l√† g√¨?

L·ªánh n√†y ƒë∆∞·ª£c d√πng trong Dockerfile ƒë·ªÉ x√°c ƒë·ªãnh ch∆∞∆°ng tr√¨nh ch√≠nh s·∫Ω ch·∫°y khi container ƒë∆∞·ª£c kh·ªüi ƒë·ªông. C√∫ ph√°p d·∫°ng `JSON array` nghƒ©a l√† n√≥ s·∫Ω kh√¥ng b·ªã ghi ƒë√® n·∫øu b·∫°n d√πng l·ªánh `docker run` th√™m c√°c ƒë·ªëi s·ªë.

üëâ ·ªû ƒë√¢y:

```dockerfile
ENTRYPOINT [ "mlflow", "server" ]
```

T·ª©c l√† khi container ch·∫°y, n√≥ s·∫Ω t·ª± ƒë·ªông ch·∫°y c√¢u l·ªánh:

```bash
mlflow server
```

=> Kh·ªüi ƒë·ªông MLflow Tracking Server.

---

### üß† Kh√°c nhau gi·ªØa `ENTRYPOINT`, `CMD`, v√† `RUN`

|L·ªánh|M·ª•c ƒë√≠ch|Ch·∫°y khi n√†o?|Ghi ƒë√® ƒë∆∞·ª£c kh√¥ng?|
|---|---|---|---|
|`RUN`|C√†i ƒë·∫∑t|Trong qu√° tr√¨nh build image|‚ùå|
|`CMD`|C√¢u l·ªánh m·∫∑c ƒë·ªãnh khi run container|Khi run container|‚úÖ|
|`ENTRYPOINT`|C√¢u l·ªánh lu√¥n lu√¥n ch·∫°y|Khi run container|‚úÖ (kh√¥ng b·ªã ghi ƒë√® ho√†n to√†n khi d√πng JSON array)|

üß™ V√≠ d·ª•:

```dockerfile
ENTRYPOINT ["python"]
CMD ["main.py"]
```

‚Üí khi ch·∫°y container s·∫Ω th·ª±c thi:

```bash
python main.py
```

---

### ü§î T·∫°i sao kh√¥ng d√πng `["python", "./main.py"]`?

B·∫°n _ho√†n to√†n c√≥ th·ªÉ_ d√πng:

```dockerfile
ENTRYPOINT ["python", "./main.py"]
```

‚Üí Khi container ch·∫°y, n√≥ s·∫Ω th·ª±c thi ngay file `main.py`.

Tuy nhi√™n, n·∫øu b·∫°n d√πng MLflow v√† mu·ªën ch·∫°y server m·∫∑c ƒë·ªãnh, th√¨ ENTRYPOINT s·∫Ω l√† `["mlflow", "server"]`. N·∫øu b·∫°n mu·ªën linh ho·∫°t thay ƒë·ªïi b·∫±ng l·ªánh `docker run`, b·∫°n n√™n d√πng `CMD`.

---

### üí° `apt-get install build-essential` ƒë·ªÉ l√†m g√¨?

L·ªánh n√†y d√πng ƒë·ªÉ c√†i c√°c c√¥ng c·ª• compile C/C++ nh∆∞ `gcc`, `g++`, `make` ‚Äì th∆∞·ªùng ƒë∆∞·ª£c d√πng khi c√†i Python packages c·∫ßn bi√™n d·ªãch C nh∆∞ `numpy`, `pandas` t·ª´ m√£ ngu·ªìn.

üìå ƒê·ª´ng qu√™n th√™m:

```dockerfile
RUN apt-get update && apt-get install -y build-essential
```

---

### ‚úÖ Best practices khi d√πng Docker v·ªõi MLflow:

- D√πng image `python:3.10-slim` ho·∫∑c `debian:bullseye-slim` ƒë·ªÉ gi·∫£m size.
    
- C√†i MLflow b·∫±ng `pip install mlflow[extras]` n·∫øu c·∫ßn SQLAlchemy/SQL backend.
    
- D√πng `ENTRYPOINT` ƒë·ªÉ kh·ªüi ƒë·ªông `mlflow server`.
    
- Mount volume khi run container ƒë·ªÉ l∆∞u tr·ªØ log/artifact.
    

---

N·∫øu b·∫°n mu·ªën m√¨nh vi·∫øt m·ªôt Dockerfile ho√†n ch·ªânh m·∫´u cho MLflow Tracking Server th√¨ c·ª© n√≥i nh√©!


C·∫£ **C√°ch 1** v√† **C√°ch 2** **ƒë·ªÅu ch·∫°y ƒë∆∞·ª£c**, nh∆∞ng s·∫Ω c√≥ **s·ª± kh√°c nhau nh·∫π** v·ªÅ c√°ch s·ª≠ d·ª•ng v√† kh·∫£ nƒÉng **ghi ƒë√®** khi b·∫°n ch·∫°y container v·ªõi l·ªánh `docker run`. M√¨nh s·∫Ω gi·∫£i th√≠ch chi ti·∫øt:

---

### ‚úÖ **C√°ch 1**:

```dockerfile
ENTRYPOINT ["python", "./main.py"]
```

- Khi container ch·∫°y, s·∫Ω lu√¥n lu√¥n th·ª±c thi:
    
    ```bash
    python ./main.py
    ```
    
- **Kh√¥ng th·ªÉ ghi ƒë√®** file `main.py` b·∫±ng tham s·ªë b√™n ngo√†i (tr·ª´ khi b·∫°n d√πng `--entrypoint`).
    

‚õî **√çt linh ho·∫°t h∆°n**, v√¨ b·∫°n ƒë√£ "c·ª©ng" c·∫£ l·ªánh `python` l·∫´n file `main.py`.

---

### ‚úÖ **C√°ch 2**:

```dockerfile
ENTRYPOINT ["python"]
CMD ["main.py"]
```

- Khi container ch·∫°y, th·ª±c thi:
    
    ```bash
    python main.py
    ```
    
- **B·∫°n c√≥ th·ªÉ ghi ƒë√® CMD** d·ªÖ d√†ng khi run container:
    
    ```bash
    docker run myimage other_script.py
    ```
    
    ‚Üí Ch·∫°y: `python other_script.py`
    

‚úÖ **Linh ho·∫°t h∆°n** n·∫øu b·∫°n mu·ªën d√πng l·∫°i image n√†y ƒë·ªÉ ch·∫°y nhi·ªÅu script Python kh√°c nhau.

---

### üîç T√≥m t·∫Øt

||C√°ch 1|C√°ch 2|
|---|---|---|
|C·ªë ƒë·ªãnh script khi build|‚úÖ|‚ùå|
|Ghi ƒë√® script khi ch·∫°y|‚ùå|‚úÖ|
|G·ªçn g√†ng, √≠t d√≤ng h∆°n|‚úÖ|‚ùå|
|D√πng t·ªët cho app "m·ªôt script duy nh·∫•t"|‚úÖ|‚úÖ|
|D√πng t·ªët cho app ch·∫°y nhi·ªÅu script t√πy √Ω|‚ùå|‚úÖ|

---

### üìå K·∫øt lu·∫≠n:

- N·∫øu b·∫°n **ch·ªâ c·∫ßn ch·∫°y 1 script duy nh·∫•t**: d√πng **C√°ch 1** cho ƒë∆°n gi·∫£n.
    
- N·∫øu b·∫°n **mu·ªën linh ho·∫°t**, ƒë√¥i l√∫c ch·∫°y script kh√°c: d√πng **C√°ch 2**.
    

Mu·ªën m√¨nh demo c√°ch build & ch·∫°y c·∫£ 2 lo·∫°i image kh√¥ng? M√¨nh c√≥ th·ªÉ vi·∫øt m·∫´u l·ªánh build + run gi√∫p b·∫°n!

---
s·∫øp rcm wandb hay mlflow nh·ªâ
```
C√°ch 1 ENTRYPOINT ["python", "main.py"]  
C√°ch 2  
ENTRYPOINT ["python"]  
CMD ["main.py"]  
  
---  
ƒê·ªÅu l√†: python main.py

- `ENTRYPOINT`: gi·ªëng nh∆∞ ‚Äú**ch∆∞∆°ng tr√¨nh ch√≠nh**‚Äù, lu√¥n lu√¥n ch·∫°y, tr·ª´ khi b·∫°n **ƒë√® b·∫±ng `--entrypoint`**.
    
- `CMD`: gi·ªëng nh∆∞ ‚Äú**ƒë·ªëi s·ªë m·∫∑c ƒë·ªãnh**‚Äù c·ªßa ch∆∞∆°ng tr√¨nh, c√≥ th·ªÉ **ghi ƒë√® khi ch·∫°y** container.
```

ƒê√∫ng r·ªìi b·∫°n! üéØ

### ‚úÖ `ENTRYPOINT` l√† c√°i **c·ªë ƒë·ªãnh** ‚Äì t·ª©c l√† **lu√¥n ƒë∆∞·ª£c th·ª±c thi** khi container ch·∫°y.

---

### üß† Hi·ªÉu ƒë∆°n gi·∫£n:

- `ENTRYPOINT`: gi·ªëng nh∆∞ ‚Äú**ch∆∞∆°ng tr√¨nh ch√≠nh**‚Äù, lu√¥n lu√¥n ch·∫°y, tr·ª´ khi b·∫°n **ƒë√® b·∫±ng `--entrypoint`**.
    
- `CMD`: gi·ªëng nh∆∞ ‚Äú**ƒë·ªëi s·ªë m·∫∑c ƒë·ªãnh**‚Äù c·ªßa ch∆∞∆°ng tr√¨nh, c√≥ th·ªÉ **ghi ƒë√® khi ch·∫°y** container.
    

---

### üîç V√≠ d·ª• minh h·ªça:

**Dockerfile:**

```dockerfile
ENTRYPOINT ["echo"]
CMD ["Hello"]
```

**Khi ch·∫°y:**

```bash
docker run myimage
```

‚û°Ô∏è S·∫Ω in ra: `Hello`

**Khi ghi ƒë√® CMD:**

```bash
docker run myimage World
```

‚û°Ô∏è S·∫Ω in ra: `World`

**Mu·ªën ƒë·ªïi c·∫£ ENTRYPOINT:**

```bash
docker run --entrypoint ls myimage
```

‚û°Ô∏è Ch·∫°y `ls` thay v√¨ `echo`

---

### üîë T√≥m g·ªçn:

|Th√†nh ph·∫ßn|C√≥ th·ªÉ ghi ƒë√® khi `docker run`|√ù nghƒ©a|
|---|---|---|
|`ENTRYPOINT`|‚ùå (tr·ª´ khi d√πng `--entrypoint`)|Ch∆∞∆°ng tr√¨nh ch√≠nh|
|`CMD`|‚úÖ|Tham s·ªë m·∫∑c ƒë·ªãnh|

---

üëâ V√¨ v·∫≠y, `ENTRYPOINT` ƒë∆∞·ª£c d√πng khi b·∫°n **mu·ªën c·ªë ƒë·ªãnh c√°ch container ho·∫°t ƒë·ªông**, c√≤n `CMD` d√πng ƒë·ªÉ **c·∫•u h√¨nh linh ho·∫°t** th√™m.

N·∫øu b·∫°n mu·ªën hi·ªÉu qua v√≠ d·ª• th·ª±c t·∫ø nh∆∞ MLflow hay Python app th√¨ m√¨nh c√≥ th·ªÉ demo th√™m nh√©!


```
sao tr√™n server mn ko l√†m UI ·∫°. Em nh·ªõ l√† n√≥ c√≥ App ƒë·ªÉ xem c√°c folder tr√™n UI  

tr∆∞·ªõc em l·ª° sudo docker shutdown h·∫øt docker c·ªßa c√¥ng ty, sau √¥ng anh ph·∫£i ƒëi start h·∫øt l√™n :2
```

```
-t l√† tag ·∫°
```

N·∫øu ko ghi t√™n m·ªói l·∫ßn n√≥ t·∫°o ra 1 t√™n m√† qu√™n ko docker compose down => n√≥ s·∫Ω t·∫°o ra nhi·ªÅu file th·ª´a, √¥ng anh c√¥ng ty em hay qu√°t em v·∫≠y. 

```
th·∫ø c√≤n supabase m√† mu·ªën host b·∫±ng docker th√¨ sao ·∫°. C√ì c√°c lo·∫°i DB n√†o mn th∆∞·ªùng d√πng v·ªõi Docker ·∫° 
```

C√≥ s·ª± thay ƒë·ªïi trong b·∫£n v·∫Ω 

EXPOSE 5000
c√≤n ch·∫°y l√† ·ªü CMD 

```
5000 l√† PORT ·ªü container, c√≤n 5001 l√† export ra ngo√†i ƒë√∫ng h√¥ng ·∫°
```

```
K·ªÉ c·∫£ mu·ªën ch·∫°y √¢m th·∫ßm tr√™n localhost c≈©ng c·∫ßn -d (ƒë·ªÉ m√† t·∫Øt IDE Code ƒëi, ko t·∫Øt Docker Desktop th√¨ n√≥ v·∫´n ch·∫°y  
(bro ·∫°)
```


Docker extention 

```
Ng√†y x∆∞a em ƒëi th·ª±c t·∫≠p, t·ª± v·ªçc th·ª≠ sai Docker m√£i huhu ch·∫Øc ph·∫£i h∆°n 20h, gi·ªù h·ªçc 2h ph√°t ti·∫øt ki·ªám ƒë∆∞·ª£c kha kh√° th·ªùi gian t·ª± m√≤ c√°c s·∫øp ·∫° :> 
(x√†i Docker r√πi m√† v√†o h·ªçc v·∫´n th·∫•y nhi·ªÅu c√°i m·ªõi ph·∫øt ·∫° :>) 
 :partyhatsmiwe::partyhatsmiwe::partyhatsmiwe: 
```


```
**@toan tran f33w1f1** b√°c compare nhanh supabase v·ªõi duckdb ƒë∆∞·ª£c ko ·∫° :v
```

D∆∞·ªõi ƒë√¢y l√† 5 c√¢u h·ªèi v√† tr·∫£ l·ªùi li√™n quan ƒë·∫øn n·ªôi dung trong cu·ªôc tr√≤ chuy·ªán:

### 1. **Khi x√≥a container trong Docker, d·ªØ li·ªáu trong volume c√≥ b·ªã m·∫•t kh√¥ng?**

**Tr·∫£ l·ªùi:** D·ªØ li·ªáu trong volume s·∫Ω kh√¥ng b·ªã m·∫•t khi x√≥a container, v√¨ volume l√† m·ªôt v√πng l∆∞u tr·ªØ ri√™ng bi·ªát v√† kh√¥ng ph·ª• thu·ªôc v√†o container. N·∫øu b·∫°n mu·ªën x√≥a c·∫£ volume, b·∫°n c·∫ßn s·ª≠ d·ª•ng c√¢u l·ªánh `docker volume rm <volume_name>`.

### 2. **Khi mu·ªën c√°c container trong Docker giao ti·∫øp v·ªõi nhau, ch√∫ng c·∫ßn ph·∫£i l√†m g√¨?**

**Tr·∫£ l·ªùi:** C√°c container trong Docker c√≥ th·ªÉ giao ti·∫øp v·ªõi nhau n·∫øu ch√∫ng n·∫±m tr√™n c√πng m·ªôt m·∫°ng Docker. ƒêi·ªÅu n√†y c√≥ th·ªÉ ƒë∆∞·ª£c thi·∫øt l·∫≠p trong Docker Compose th√¥ng qua ph·∫ßn `networks`, ho·∫∑c ƒë∆°n gi·∫£n l√† c√°c container t·ª± ƒë·ªông ƒë∆∞·ª£c k·∫øt n·ªëi v·ªõi nhau khi ch√∫ng chia s·∫ª c√πng m·ªôt network. B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng t√™n c·ªßa service nh∆∞ l√† hostname ƒë·ªÉ giao ti·∫øp gi·ªØa c√°c container.

### 3. **Docker h·ªó tr·ª£ c√°c lo·∫°i network n√†o v√† khi n√†o n√™n s·ª≠ d·ª•ng m·ªói lo·∫°i?**

**Tr·∫£ l·ªùi:** Docker h·ªó tr·ª£ 4 lo·∫°i network ch√≠nh:

- **Bridge network:** D√πng cho container tr√™n c√πng m·ªôt host. ƒê√¢y l√† network m·∫∑c ƒë·ªãnh cho c√°c container khi kh√¥ng ch·ªâ ƒë·ªãnh network.
    
- **Host network:** Container s·∫Ω s·ª≠ d·ª•ng network c·ªßa host, gi√∫p c·∫£i thi·ªán hi·ªáu su·∫•t nh∆∞ng c√≥ th·ªÉ b·ªã xung ƒë·ªôt v·ªõi c√°c ·ª©ng d·ª•ng kh√°c.
    
- **None network:** Container kh√¥ng c√≥ k·∫øt n·ªëi m·∫°ng.
    
- **Custom network:** B·∫°n c√≥ th·ªÉ t·ª± t·∫°o v√† c·∫•u h√¨nh m·ªôt network ri√™ng, th√≠ch h·ª£p khi b·∫°n c·∫ßn nhi·ªÅu container giao ti·∫øp v·ªõi nhau trong m·ªôt m√¥i tr∆∞·ªùng m·∫°ng ri√™ng bi·ªát.
    

### 4. **Th·∫ø n√†o l√† multi-stage trong Docker v√† n√≥ gi√∫p gi·∫£m k√≠ch th∆∞·ªõc image nh∆∞ th·∫ø n√†o?**

**Tr·∫£ l·ªùi:** Multi-stage build trong Docker l√† k·ªπ thu·∫≠t s·ª≠ d·ª•ng nhi·ªÅu `FROM` trong Dockerfile. ƒêi·ªÅu n√†y cho ph√©p b·∫°n x√¢y d·ª±ng ·ª©ng d·ª•ng qua nhi·ªÅu giai ƒëo·∫°n, m·ªói giai ƒëo·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt image kh√°c nhau (v√≠ d·ª•, giai ƒëo·∫°n build s·ª≠ d·ª•ng m·ªôt image ch·ª©a c√°c c√¥ng c·ª• x√¢y d·ª±ng, v√† giai ƒëo·∫°n runtime s·ª≠ d·ª•ng m·ªôt image nh·∫π h∆°n). Sau khi ho√†n th√†nh, b·∫°n ch·ªâ gi·ªØ l·∫°i c√°c file c·∫ßn thi·∫øt t·ª´ c√°c giai ƒëo·∫°n cu·ªëi, gi√∫p gi·∫£m k√≠ch th∆∞·ªõc c·ªßa image cu·ªëi c√πng.

### 5. **L√†m sao ƒë·ªÉ c√°c service trong Docker Compose li√™n k·∫øt v√† giao ti·∫øp v·ªõi nhau th√¥ng qua t√™n service?**

**Tr·∫£ l·ªùi:** Trong Docker Compose, m·ªói service c√≥ th·ªÉ giao ti·∫øp v·ªõi nhau th√¥ng qua t√™n c·ªßa service ƒë√≥, v√¨ Docker Compose t·ª± ƒë·ªông t·∫°o m·ªôt m·∫°ng ri√™ng cho c√°c container. V√≠ d·ª•, n·∫øu b·∫°n c√≥ m·ªôt service `postgres` v√† m·ªôt service `web`, container `web` c√≥ th·ªÉ k·∫øt n·ªëi v·ªõi container `postgres` th√¥ng qua hostname `postgres` m√† kh√¥ng c·∫ßn ph·∫£i d√πng ƒë·ªãa ch·ªâ IP c·ª• th·ªÉ.

N·∫øu b·∫°n c·∫ßn th√™m chi ti·∫øt v·ªÅ b·∫•t k·ª≥ c√¢u h·ªèi n√†o, c·ª© cho m√¨nh bi·∫øt!

---

```
S·∫øp c√≥ th·ªÉ, ƒëi·ªÉm qua C√ÅC L·ªñI PH·ªî BI·∫æN th∆∞·ªùng g·∫∑p khi l√†m vi·ªác v·ªõi Network ko ·∫°.  
  
S·∫øp c√≥ 1 template chu·∫©n n√†o ƒë·ªÉ tr√°nh c√°c l·ªói li√™n quan ƒë·∫øn Network (nh∆∞ PORT, subnetwork, ... ko ·∫°)
```

![[Pasted image 20250425215704.png]]

```
https://docs.docker.com/engine/network/drivers/
```