```
=> CACHED [intent-api 8/10] RUN pip3 install --no-cache-dir --upgrade pip && pip3 install --no-cache-dir -r /app/requi 0.0s => CACHED [intent-api 9/10] COPY src/ /app/src/ 0.0s => CACHED [intent-api 10/10] RUN mkdir -p /app/src/logs 0.0s => [intent-api] exporting to image 0.0s => => exporting layers 0.0s => => writing image sha256:f82813ab1604d9c58868f6d27b9ac37fdf15a01eb3c227088b45a42362d255f4 0.0s => => naming to docker.io/library/miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation-intent-api 0.0s [+] Running 1/0 ✘ Network miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network Error 0.0s failed to create network miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network: Error response from daemon: could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network θ73° [ubuntu@mgc-dev2-3090:~/truc_ai/MiniProd_NLP2_IntentClassification_MappingFastResponse_T1_2025_StepUpEducation/src] master(+10/-4)* ± Lỗi gì đây nhỉ
```

Nguyên nhân và cách xử lý

- Lỗi: Docker không tạo được network vì “could not find an available, non-overlapping IPv4 address pool among the defaults…”. Nghĩa là dải IP mặc định của Docker (IPAM) đã hết slot hoặc bị trùng với route hiện có (thường do VPN, nhiều network cũ còn tồn tại, hoặc cấu hình IP trùng).

Cách khắc phục nhanh (chọn 1 trong các cách sau)

1) Dọn mạng Docker cũ rồi chạy lại
- Xem các network hiện có:
```bash
docker network ls
```
- Xóa các network không dùng (cẩn thận: sẽ xóa tất cả network không gắn container):
```bash
docker network prune
```
- Hoặc xóa đúng network của project (nếu tồn tại):
```bash
docker network rm miniprod_nlp2_intentclassification_mappingfastresponse_t1_2025_stepupeducation_intent-network
```
- Khởi động lại Docker:
```bash
sudo systemctl restart docker
```
- Chạy lại docker compose.

2) Chỉ định subnet riêng trong docker-compose để tránh trùng
- Trong `docker-compose.yml`, đặt subnet khác hẳn VPN/host (ví dụ 172.30.0.0/24):
```yaml
networks:
  intent-network:
    driver: bridge
    ipam:
      config:
        - subnet: 172.30.0.0/24
```
- Nếu vẫn trùng, đổi sang 172.31.0.0/24 hoặc 10.99.0.0/24,…

3) Mở rộng “default-address-pools” của Docker daemon
- Tạo/sửa [/etc/docker/daemon.json](cci:7://file:///etc/docker/daemon.json:0:0-0:0):
```json
{
  "default-address-pools": [
    { "base": "172.17.0.0/12", "size": 24 },
    { "base": "10.0.0.0/8",     "size": 24 }
  ]
}
```
- Sau đó:
```bash
sudo systemctl restart docker
```
- Cách này giúp Docker có nhiều pool địa chỉ, giảm khả năng trùng.

Gợi ý kiểm tra trùng dải IP
- Kiểm tra route hiện tại (đặc biệt khi bật VPN):
```bash
ip route
```
- Nếu thấy các dải 172.17/16, 172.18/16, 172.19/16, 10.x/8 đang dùng, chọn subnet Docker tránh những dải đó.

Bạn muốn mình sửa ngay `docker-compose.yml` để đặt subnet cố định cho `intent-network`, hay thử dọn network (prune) trước cho nhanh?