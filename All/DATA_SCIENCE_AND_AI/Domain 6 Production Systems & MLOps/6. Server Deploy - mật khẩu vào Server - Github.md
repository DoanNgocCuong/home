

## 1. S·ª≠ d·ª•ng Crusor / VSCode ƒë·ªÉ truy c·∫≠p Server qua SSH code cho ti·ªán. 
- C√°c l·ªánh c·∫ßn l√™n server s·∫Ω x√†i: sudo
Ch·∫≥ng h·∫°n: 
```
sudo docker compose up --build -d
```
---

## 2. Truy c·∫≠p v√†o Server

- **SSH v√†o server**  
    M·ªü terminal/WSL/PowerShell v√† ch·∫°y l·ªánh:
    
    ```bash
    ssh ubuntu@103.253.20.13
    ```
    
- **Nh·∫≠p m·∫≠t kh·∫©u**  
    
    
- **SSH v√†o server**  
    M·ªü terminal/WSL/PowerShell v√† ch·∫°y l·ªánh:
    
    ```bash
    ssh ubuntu@103.253.20.30
    ```
    
- **Nh·∫≠p m·∫≠t kh·∫©u**  
    
    ```plaintext
	    StepUp1MGC2468uvK!!!
    ```
    
--
---

## 3. B·ªï tr·ª£: Xem th∆∞ m·ª•c d·∫°ng c√¢y - X√°c ƒë·ªãnh port n√†o ƒëang ch·∫°y 

- **X√°c ƒë·ªãnh container ch·∫°y tr√™n port 25039:**
    
    ```bash
    sudo docker ps | grep 25039
    ```

- **Xem c·∫•u tr√∫c th∆∞ m·ª•c d·∫°ng c√¢y:**
    
    ```bash
    sudo apt install tree -y  # n·∫øu ch∆∞a c√†i tree
    tree -L 2
    ```
    
C·∫•u H√¨nh SSH Cho VSCode (Remote - SSH)

1. **T·∫°o ho·∫∑c ch·ªânh s·ª≠a file c·∫•u h√¨nh SSH**  
    M·ªü file `C:\Users\User\.ssh\config` v√† th√™m:
    
    ```plaintext
    Host my-server
        HostName 103.253.20.13
        User ubuntu
        Port 22
        IdentityFile C:\Users\User\.ssh\id_rsa
    ```
    
    - **L∆∞u √Ω:** N·∫øu b·∫°n ƒëƒÉng nh·∫≠p b·∫±ng m·∫≠t kh·∫©u, c√≥ th·ªÉ b·ªè qua d√≤ng `IdentityFile`.
2. **K·∫øt n·ªëi qua VSCode:**  
    M·ªü VSCode, nh·∫•n `Ctrl+Shift+P`, ch·ªçn **Remote-SSH: Connect to Host**, sau ƒë√≥ ch·ªçn `my-server`.
    
#### Qu·∫£n L√Ω File Tr√™n Server

| **C√¥ng C·ª•**            | **N·ªÅn T·∫£ng**          | **Ch·ª©c NƒÉng**                                        | **Giao Th·ª©c** | **ƒê·ªëi T∆∞·ª£ng**                                     | **Link**                                          |
| ---------------------- | --------------------- | ---------------------------------------------------- | ------------- | ------------------------------------------------- | ------------------------------------------------- |
| **WinSCP**             | Windows               | Duy·ªát file, k√©o th·∫£, ch·ªânh s·ª≠a tr·ª±c ti·∫øp             | SFTP, SCP     | Ng∆∞·ªùi d√πng Windows mu·ªën giao di·ªán gi·ªëng Explorer  | [T·∫£i WinSCP](https://winscp.net/eng/download.php) |
| **FileZilla**          | Windows, macOS, Linux | Truy·ªÅn file v·ªõi giao di·ªán ƒë∆°n gi·∫£n                   | FTP, SFTP     | Qu·∫£n l√Ω file qua giao di·ªán d·ªÖ l√†m quen            | [T·∫£i FileZilla](https://filezilla-project.org/)   |
| **MobaXterm**          | Windows               | SSH client t√≠ch h·ª£p qu·∫£n l√Ω file                     | SSH, SFTP     | L·∫≠p tr√¨nh vi√™n c·∫ßn SSH & qu·∫£n l√Ω file trong 1 app | [T·∫£i MobaXterm](https://mobaxterm.mobatek.net/)   |
| **Visual Studio Code** | Windows, macOS, Linux | IDE v·ªõi extension Remote-SSH ƒë·ªÉ duy·ªát/ch·ªânh s·ª≠a file | SSH           | L·∫≠p tr√¨nh vi√™n mu·ªën ch·ªânh s·ª≠a file tr·ª±c ti·∫øp      | [T·∫£i VS Code](https://code.visualstudio.com/)     |
| **Cockpit**            | Web-based             | Qu·∫£n l√Ω server qua tr√¨nh duy·ªát                       | Web browser   | Ng∆∞·ªùi th√≠ch qu·∫£n l√Ω server qua giao di·ªán web      | (C·∫ßn c√†i ƒë·∫∑t tr√™n server)                         |

---

## ƒê·∫£m b·∫£o t·ªëi ∆∞u Disk - Server

```python
# X√≥a t·∫•t c·∫£ containers, images, volumes kh√¥ng d√πng
docker system prune -af --volumes
```





# 4. V·ªÅ ƒë·∫©y code thao t√°c v·ªõi server - git

# 1. Connect Pull Code xu·ªëng Server

## 1.1 **T√≥m t·∫Øt c√°ch k·∫øt n·ªëi GitHub c√° nh√¢n v·ªõi server c√¥ng ty ƒë·ªÉ clone repo tr·ª±c ti·∫øp** üöÄ

1. **Ki·ªÉm tra SSH key tr√™n server**
    
    ```bash
    ls -al ~/.ssh
    ```

```
¬± ls -al ~/.ssh2-3090:~/cuong_dn/MiniProd_Web4_ContentEngFlow_StepUpE_T102024]‚îî4 main 
total 52
drwx------  2 ubuntu ubuntu  4096 May  5 09:25 .
drwxr-xr-x 17 ubuntu ubuntu  4096 May  5 09:31 ..
-rw-rw-r--  1 ubuntu ubuntu 11250 Apr 21 08:32 authorized_keys
-rw-rw-r--  1 ubuntu ubuntu   309 May  5 09:25 config
-rw-------  1 ubuntu ubuntu  1675 Apr 22 11:33 id_rsa
-rw-r--r--  1 ubuntu ubuntu   402 Apr 22 11:33 id_rsa.pub
-rw-------  1 ubuntu ubuntu  3243 May  5 09:28 id_rsa_doanngoccuong
-rw-r--r--  1 ubuntu ubuntu   756 May  5 09:28 id_rsa_doanngoccuong.pub
-rw-------  1 ubuntu ubuntu  3243 May  5 09:07 id_rsa_newgithub
-rw-r--r--  1 ubuntu ubuntu   756 May  5 09:07 id_rsa_newgithub.pub
-rw-r--r--  1 ubuntu ubuntu  1110 Apr 25 03:58 known_hosts
¬± \buntu@mgc-dev2-3090:~/cuong_dn/MiniProd_Web4_ContentEngFlow_StepUpE_T102024]‚îî4 main 
```

- N·∫øu ƒë√£ c√≥ `id_rsa` v√† `id_rsa.pub`, ti·∫øp t·ª•c b∆∞·ªõc 3.
- N·∫øu ch∆∞a c√≥, t·∫°o SSH key m·ªõi:

```
ssh-keygen -t rsa -b 4096 -C "your-email@example.com"
```
        
2. **L·∫•y SSH Public Key**
    
    ```bash
    cat ~/.ssh/id_rsa.pub
    ```
    
    - Sao ch√©p to√†n b·ªô n·ªôi dung public key.
3. **Th√™m SSH Key v√†o GitHub**
    
    - Truy c·∫≠p [GitHub SSH Keys](https://github.com/settings/keys).
    - Ch·ªçn **New SSH Key** ‚Üí D√°n n·ªôi dung key ‚Üí **Add SSH Key**.
4. **Ki·ªÉm tra k·∫øt n·ªëi v·ªõi GitHub**
    
    ```bash
    ssh -T git@github.com
    ```
    
    - N·∫øu hi·ªÉn th·ªã:
        
        ```
        Hi your-username! You've successfully authenticated, but GitHub does not provide shell access.
        ```
        
        ‚Üí K·∫øt n·ªëi th√†nh c√¥ng.
5. **Clone repo v·ªÅ server**
    
    ```bash
    git clone git@github.com:your-username/your-repo.git
    ```
    
    - Thay `your-username` b·∫±ng GitHub username c·ªßa b·∫°n.
    - Thay `your-repo` b·∫±ng t√™n repo c·∫ßn clone.

üìå **Ghi ch√∫:** N·∫øu g·∫∑p l·ªói `Permission denied (publickey)`, ch·∫°y:

```bash
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_rsa
```


---
## 1.2 B·∫°n mu·ªën th√™m m·ªôt t√†i kho·∫£n GitHub m·ªõi v√†o m√°y n√†y. D∆∞·ªõi ƒë√¢y l√† c√°c b∆∞·ªõc ƒë∆°n gi·∫£n ƒë·ªÉ th√™m m·ªôt t√†i kho·∫£n GitHub m·ªõi:

### 1. T·∫°o SSH key m·ªõi cho t√†i kho·∫£n GitHub m·ªõi

```bash
ssh-keygen -t rsa -b 4096 -C "email_cua_ban@github.com"
```
- Khi ƒë∆∞·ª£c h·ªèi n∆°i l∆∞u file, b·∫°n n√™n ƒë·∫∑t t√™n kh√°c, v√≠ d·ª•: `~/.ssh/id_rsa_newgithub`
`~/.ssh/id_rsa_doanngoccuong`
- ƒê·∫∑t passphrase n·∫øu mu·ªën (ho·∫∑c ƒë·ªÉ tr·ªëng).

### 2. Th√™m SSH key m·ªõi v√†o ssh-agent

```bash
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_rsa_newgithub
ssh-add ~/.ssh/id_rsa_doanngoccuong

```

```
[ubuntu@mgc-dev2-3090:~/cuong_dn]‚îî4 $ eval "$(ssh-agent -s)"
Agent pid 2967
```
### 3. Th√™m public key v√†o GitHub m·ªõi

- L·∫•y n·ªôi dung public key:
  ```bash
  cat ~/.ssh/id_rsa_newgithub.pub
- cat ~/.ssh/id_rsa_doanngoccuong.pub
  ```
***- Copy n·ªôi dung n√†y, v√†o GitHub m·ªõi ‚Üí Settings ‚Üí SSH and GPG keys ‚Üí New SSH key ‚Üí D√°n v√†o.***

### Ki·ªÉm tra xem ƒë√£ th√™m ƒë∆∞·ª£c ssh server v√†o github ch∆∞a 

```
[ubuntu@mgc-dev2-3090:~/cuong_dn]‚îî4 $ ssh -T git@github.com
Hi thanhdt24! You've successfully authenticated, but GitHub does not provide shell access.
```

B·∫°n ƒë√£ l√†m ƒë√∫ng c√°c b∆∞·ªõc t·∫°o SSH key m·ªõi v√† th√™m v√†o t√†i kho·∫£n GitHub m·ªõi. Tuy nhi√™n, khi ki·ªÉm tra v·∫´n ra ‚Äúthanhdt24‚Äù.  
ƒêi·ªÅu n√†y th∆∞·ªùng do Git ƒëang d√πng SSH key c≈© (c·ªßa thanhdt24) thay v√¨ key m·ªõi (c·ªßa DoanNgocCuong).

**B·∫°n c·∫ßn l√†m th√™m 1 b∆∞·ªõc n·ªØa:**  
C·∫•u h√¨nh file `~/.ssh/config` ƒë·ªÉ ch·ªâ ƒë·ªãnh ƒë√∫ng SSH key cho t√†i kho·∫£n GitHub c·ªßa b·∫°n.

---
### Ki·ªÉm tra l·∫°i SSH:

```bash
ssh -T git@github.com-doanngoccuong
```
N·∫øu ƒë√∫ng, s·∫Ω hi·ªán:
```
[ubuntu@mgc-dev2-3090:~/cuong_dn]‚îî4 $ ssh -T git@github.com-doanngoccuong
Hi DoanNgocCuong! You've successfully authenticated, but GitHub does not provide shell access.
[ubuntu@mgc-dev2-3090:~/cuong_dn]‚îî4 $ 
```

---

### V√≠ d·ª• c·∫•u h√¨nh file `~/.ssh/config`:

M·ªü file (t·∫°o m·ªõi n·∫øu ch∆∞a c√≥):
```bash
nano ~/.ssh/config
```

Th√™m v√†o:
```
# Key cho t√†i kho·∫£n DoanNgocCuong
Host github.com-doanngoccuong
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_doanngoccuong

# Key cho t√†i kho·∫£n thanhdt24 (n·∫øu v·∫´n d√πng)
Host github.com-thanhdt24
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_thanhdt24
```

---
## 1.3 Bug khi Clone 1 Private Repo: 

```
[ubuntu@mgc-dev2-3090:~/cuong_dn]‚îî4 $ git clone https://github.com/DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024
Cloning into 'MiniProd_Web4_ContentEngFlow_StepUpE_T102024'...
remote: Invalid username or password.
fatal: Authentication failed for 'https://github.com/DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024/'
```


B·∫°n ƒë√£ x√°c th·ª±c SSH th√†nh c√¥ng v·ªõi t√†i kho·∫£n DoanNgocCuong:

```
Hi DoanNgocCuong! You've successfully authenticated, but GitHub does not provide shell access.
```

Nh∆∞ng khi clone b·∫±ng HTTPS, b·∫°n v·∫´n b·ªã l·ªói:
```
remote: Invalid username or password.
fatal: Authentication failed for 'https://github.com/DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024/'
```

**Nguy√™n nh√¢n:**  
- B·∫°n ƒëang d√πng HTTPS ƒë·ªÉ clone, nh∆∞ng GitHub kh√¥ng cho d√πng username/password th√¥ng th∆∞·ªùng n·ªØa. N·∫øu kh√¥ng nh·∫≠p Personal Access Token (PAT), s·∫Ω b·ªã l·ªói n√†y.
- B·∫°n ƒë√£ c·∫•u h√¨nh SSH ƒë√∫ng, n√™n h√£y d√πng SSH ƒë·ªÉ clone.

C√°ch s·ª≠a l·ªói

**1. Clone b·∫±ng SSH (kh√¥ng d√πng HTTPS):**


Ho·∫∑c n·∫øu b·∫°n ƒë√£ c·∫•u h√¨nh Host trong `~/.ssh/config` l√† `github.com-doanngoccuong`, d√πng:
```bash
git clone git@github.com-doanngoccuong:DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024.git

git clone git@gitlab.com:platform-rag/personalized-ai-coach.git

git clone git@gitlab.com:platform-rag/robot-ai-lesson.git

git clone git@gitlab.com:platform-rag/robot-ai-tool.git

git clone git@gitlab.com:platform-rag/robot-ai-workflow.git
```

**2. Kh√¥ng d√πng HTTPS n·ªØa**  
Ch·ªâ d√πng HTTPS khi b·∫°n c√≥ Personal Access Token (PAT) v√† nh·∫≠p v√†o khi ƒë∆∞·ª£c h·ªèi m·∫≠t kh·∫©u.



---





# 2. ƒê·∫©y code l√™n: 

## 2.1. Set t√™n v√† email cho repository hi·ªán t·∫°i

```
# Set t√™n v√† email c·ªßa b·∫°n cho repository hi·ªán t·∫°i

git config --local user.name "Doan Ngoc Cuong"

git config --local user.email "cuongmkmtpgoldfinch@gmail.com"

# Ki·ªÉm tra l·∫°i config ƒë√£ ƒë√∫ng ch∆∞a

git config --local --list


# Set local repository configuration
git config --local user.name "Doan Ngoc Cuong"
git config --local user.email "cuongmkmtpgoldfinch@gmail.com"

# Set global configuration (for all repositories)
git config --global user.name "Doan Ngoc Cuong"
git config --global user.email "cuongmkmtpgoldfinch@gmail.com"

# Verify your configurations
# Check local config
git config --local --list

# Check global config
git config --global --list
```

## 2.2 Khi g·∫∑p 1 s·ªë l·ªói l√∫c ƒë·∫©y l√™n - x√†i Personal Access Token t·ª´ Github ƒë·ªÉ push ƒë√∫ng l√™n: Ah, t√¥i hi·ªÉu r·ªìi! V·∫•n ƒë·ªÅ l√† m·∫∑c d√π b·∫°n ƒëang push v·ªõi credentials c·ªßa t√†i kho·∫£n GitHub DoanNgocCuong, nh∆∞ng th√¥ng tin commit v·∫´n ƒëang d√πng t√™n v√† email c·ªßa H√πng (t·ª´ git config).


## **T√≥m t·∫Øt l·ªói, nguy√™n nh√¢n, v√† c√°ch fix l·ªói khi push l√™n GitHub**

---

### **V·∫•n ƒë·ªÅ/Bug**

- Khi push code l√™n GitHub b·∫°n g·∫∑p l·ªói:
    ```
    remote: Invalid username or password.
    fatal: Authentication failed for 'https://github.com/DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025/'
    ```
- Ho·∫∑c:
    ```
    ERROR: Permission to DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git denied to thanhdt24.
    fatal: Could not read from remote repository.
    Please make sure you have the correct access rights
    and the repository exists
    ```

---

### **Nguy√™n nh√¢n**

- **GitHub ƒë√£ ng·ª´ng h·ªó tr·ª£ username/password cho HTTPS**: B·∫°n ph·∫£i d√πng Personal Access Token (PAT) ho·∫∑c SSH Key.
- **Sai quy·ªÅn truy c·∫≠p**: N·∫øu b·∫°n push b·∫±ng user kh√¥ng c√≥ quy·ªÅn (v√≠ d·ª• `thanhdt24`), b·∫°n s·∫Ω b·ªã t·ª´ ch·ªëi truy c·∫≠p repository c·ªßa `DoanNgocCuong`.
- **Sai c·∫•u h√¨nh remote**: N·∫øu remote kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng ho·∫∑c kh√¥ng ƒë√∫ng t√†i kho·∫£n, c≈©ng s·∫Ω b·ªã t·ª´ ch·ªëi.

---

### **H∆∞·ªõng d·∫´n Fix L·ªói**

#### **STEP 1. ƒê·∫£m b·∫£o quy·ªÅn truy c·∫≠p ƒë√∫ng t√†i kho·∫£n**

- B·∫°n ph·∫£i c√≥ quy·ªÅn push l√™n repo ƒë√≥ (repo thu·ªôc user/t·ªï ch·ª©c c·ªßa b·∫°n).

#### **STEP 2. C·∫•u h√¨nh l·∫°i remote**

**A. N·∫øu d√πng HTTPS + Personal Access Token (PAT):**

1. T·∫°o Personal Access Token tr√™n GitHub ([h∆∞·ªõng d·∫´n chi ti·∫øt](https://github.com/settings/tokens)).
2. ƒê·ªïi remote:
    ```bash
    git remote set-url origin https://DoanNgocCuong:YOUR_TOKEN_HERE@github.com/DoanNgocCuong/MiniProd_Web8_AutoPromptingTuning_T2_2025.git
    ```
    ho·∫∑c:
    ```bash
    git remote set-url origin https://DoanNgocCuong:YOUR_TOKEN_HERE@github.com/DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git
    ```
    **L∆∞u √Ω:** Thay `YOUR_TOKEN_HERE` b·∫±ng token th·ª±c c·ªßa b·∫°n.

3. Push l·∫°i:
    ```bash
    git push origin main
    ```

**B. N·∫øu d√πng SSH key (khuy√™n d√πng):**

1. ƒê·∫£m b·∫£o b·∫°n ƒë√£ t·∫°o v√† add SSH key l√™n GitHub ([h∆∞·ªõng d·∫´n chi ti·∫øt](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account)).
2. ƒê·ªïi remote v·ªÅ SSH:

```bash
¬† ¬†git clone git@github.com:DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024.git
```

    ```bash
    git remote set-url origin git@github.com:DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git
    ```
    N·∫øu b·∫°n d√πng nhi·ªÅu t√†i kho·∫£n GitHub ho·∫∑c c·∫•u h√¨nh nhi·ªÅu host, b·∫°n c√≥ th·ªÉ g·∫∑p bug sau : 
```bash
    ERROR: Permission to DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git denied to thanhdt24.fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists
```
=> Fix b·∫±ng c√°ch ƒë·ªÉ d·∫°ng remote l√†:

```
git remote set-url origin git@github.com-doanngoccuong:DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git
```

(Ch·ªâ d√πng n·∫øu b·∫°n ƒë√£ c·∫•u h√¨nh `~/.ssh/config` cho nhi·ªÅu host.)

3. Push l·∫°i:
    ```bash
    git push
    ```

---

### **T√≥m t·∫Øt c√°c b∆∞·ªõc fix**

```bash
# (1) N·∫øu d√πng HTTPS + PAT:
git remote set-url origin https://DoanNgocCuong:YOUR_TOKEN_HERE@github.com/DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git
git push

# (2) N·∫øu d√πng SSH:
git remote set-url origin git@github.com:DoanNgocCuong/MiniProd_Agent2_WorkflowAgents_T5_2025.git
git push

git remote set-url origin git@github.com-doanngoccuong:Hngdcmnh/tool_su_table_to_json.git
```

---

### **L∆∞u √Ω:**
- **Kh√¥ng chia s·∫ª token c√° nh√¢n cho ng∆∞·ªùi kh√°c.** N·∫øu l·ª° ƒë·ªÉ l·ªô, h√£y v√†o GitHub ƒë·ªÉ revoke token ƒë√≥.
- N·∫øu d√πng SSH, h√£y ƒë·∫£m b·∫£o SSH key ƒë√£ add l√™n GitHub v√† m√°y b·∫°n ƒëang d√πng ƒë√∫ng key.
- N·∫øu push b·ªã l·ªói permission v·ªõi username kh√°c (`thanhdt24`), h√£y ki·ªÉm tra l·∫°i quy·ªÅn truy c·∫≠p GitHub ho·∫∑c c·∫•u h√¨nh SSH/HTTPS ƒë√∫ng user.

---


---


# Other - ch∆∞a check k·ªπ 

ƒê·ªÉ ƒëƒÉng nh·∫≠p v√†o GitLab qua command line, b·∫°n c√≥ th·ªÉ l√†m theo c√°c b∆∞·ªõc sau:

1. ƒê·∫ßu ti√™n, t·∫°o Personal Access Token tr√™n GitLab:
   - ƒêƒÉng nh·∫≠p v√†o t√†i kho·∫£n GitLab c·ªßa b·∫°n qua web browser
   - V√†o Settings -> Access Tokens (ho·∫∑c v√†o ƒë∆∞·ªùng d·∫´n: https://gitlab.com/-/profile/personal_access_tokens)
   - T·∫°o m·ªôt token m·ªõi v·ªõi quy·ªÅn `read_repository` v√† `write_repository`
   - L∆∞u l·∫°i token ƒë∆∞·ª£c t·∫°o ra
```
git clone https://oauth2:YOUR_NEW_TOKEN@gitlab.com/DoanNgocCuong/robot-ai-workflow-doan-ngoc-cuong
```


---

# X·ª≠ l√Ω l·ªói 

T√¥i th·∫•y remote URL c·ªßa b·∫°n ƒëang d√πng HTTPS:
```
origin  https://github.com/DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024
```

ƒê·ªÉ s·ª≠a l·ªói push, h√£y ƒë·ªïi sang d√πng SSH URL:

```bash
git remote set-url origin git@github.com:DoanNgocCuong/MiniProd_Web4_ContentEngFlow_StepUpE_T102024.git
```

Sau ƒë√≥ ki·ªÉm tra l·∫°i b·∫±ng l·ªánh:
```bash
git remote -v
```

URL m·ªõi s·∫Ω b·∫Øt ƒë·∫ßu b·∫±ng `git@github.com:` thay v√¨ `https://`

B√¢y gi·ªù b·∫°n c√≥ th·ªÉ push code m√† kh√¥ng c·∫ßn nh·∫≠p username/password n·ªØa v√¨ ƒë√£ x√°c th·ª±c qua SSH key.

B·∫°n mu·ªën t√¥i gi·∫£i th√≠ch th√™m v·ªÅ s·ª± kh√°c bi·ªát gi·ªØa HTTPS v√† SSH kh√¥ng?



---






**L·∫ßn 1 estimate xong trong 2h, nh∆∞ng 6h m·ªõi xong (2h gen, 4h s·ª≠a+code update lu·ªìng)**

|   |   |   |   |   |   |   |   |   |   |   |
|---|---|---|---|---|---|---|---|---|---|---|
||S·ªë situations  <br>(m·ªói situation g·ªìm 5 scenarios, m·ªói senario 1 l√∫c gen 8 audios)|S·ªë workers|Time t·ªïng|Time trung b√¨nh|S·ªë audios b·ªã l·ªói  <br>---  <br>=IF(ISNUMBER(SEARCH("NULL",Q2)),0,1)|S·ªë Situation b·ªã l·ªói Lesson Detail b·ªã l·ªói (B·ªã thi·∫øu 1/5-6 scenario)  <br>  <br>=COUNTIF(A:A, B2) > 0|S·ªë Situations b·ªã l·ªói  <br>---  <br>"status": "error"|T·ªïng situations b·ªã l·ªói|S·ªë Lesson Detail b·ªã l·ªói|Nguy√™n nh√¢n l·ªói|
|L·∫ßn 1|74|20|5.3 min|4.3 s/item|1|0||75|||
|L·∫ßn 2|244|40|9.4 min|2.3 s/item|205|2 (8585, 9659)|||2 cases kh·∫£ nƒÉng cao do gi·ªõi h·∫°n OpenAI|
|L·∫ßn 3|217|40|10.1 min|2.8 s/item|233|5 (10054, 10058, 10072, 10094, 13292)|||- 1 case c·ª•m c·∫•u tr√∫c kh√¥ng c√≥ ___  <br>- 4 cases kh·∫£ nƒÉng cao do gi·ªõi h·∫°n OpenAI|
|Sum ƒê·ª£t 1|535||||||||||
|L·∫ßn 4 (non work)|708|10|86.7|7.3s/item|12|5|0||||

  

|   |   |   |   |   |   |   |   |
|---|---|---|---|---|---|---|---|
|L·ªåC + GEN Situations c√≥ Audio b·ªã l·ªói (75 situations)|   |   |   |=> Code gen nhanh d·ª±a v√†o 1 list _situation_id_____|   |   ||
|Merge situations l·ªói v√†o chung|   |   |   |=> Code th√™m ph·∫ßn ƒë·ªÉ merge nhanh ph·∫ßn SITUATIONS GEN M·ªöI thay th·∫ø cho Situatons c≈©|   |   ||
|Gen Situations b·ªã thi·∫øu (maybe do gi·ªõi h·∫°n OpenAI)|   |   |   ||   |   |code sau n·∫øu c√≥ time|

|   |   |   |   |   |   |   |   |   |   |   |
|---|---|---|---|---|---|---|---|---|---|---|
||||1 Situations = 5 scenario * 8 audios|20 Situation|100 Situations|700 Situations|10K Situations|1 Job Roles = 10 Topics √ó 5 Situations = 50 situations|10 Job Roles = 500 Stuations|300 Collections √ó 10 Topics √ó 5 Situations = **15,000 Situations**|
|1. D·ª± ki·∫øn gen: 20 lu·ªìng 1 l√∫c => L·ªói situations d·ª± ki·∫øn = 1%|   |   |1.5min|1.5min|7.5min|Th·ªùi gian ch·∫°y 10 worker = 86.7min, 20 worker = 43min.|750min ~ 12-13h|3.6min|36min ~ 40min|36min * 30 = 15h~18h < 24h|
|0. L·∫•y k·∫øt qu·∫£ t·ª´ tr√™n server xu·ªëng m√°y v√† ghi log time + M√ÅY LAG V√å NHI·ªÄU D√íNG QU√Å|   |   ||||15min qua github|||||
|2.  <br>L·ªçc c√°c ph·∫ßn l·ªói:  <br>+, L·ªçc Audio b·ªã l·ªói (do gi·ªõi h·∫°n API Audio)  <br>+, L·ªçc Scenario b·ªã l·ªói (gi·ªõi h·∫°n API OpenAI)|   |   |L√†m tay 10 min|L√†m tay 11 min|L√†m tay 12 min|15min(Drive l√¢u)+25min(sau chuy·ªÉn xu·ªëng local - excel nhanh)|L√†m tay 20 min|L√†m tay 14 min|L√†m tay 15 min|L√†m tay 20 min|
|3. Gen l·∫°i ph·∫ßn b·ªã l·ªói:  <br>+, Check xem c√≤n b·ªã thi·∫øu kh√¥ng  <br>+, Merge ph·∫ßn b·ªã l·ªói v√†o ph·∫ßn g·ªëc (ƒë√£ oke) Th·ªùi gian ƒë·ªÉ gen l·∫°i 1% L·ªói:|   |   |30min|31min|32min|40min|1% l·ªói gen l·∫°i =1h|2h|35min|1% l·ªói gen l·∫°i = 1.5h-2h|
|D·ª∞ TR√ô|   |   |||||5H|2h|35min|8H|
|Sum|   |   |||SUM|43min gen + 1h r∆∞·ª°i (x·ª≠ l√Ω v√† gen b·ªï sung)|15h-20H|2h|35min|20h-30H|

  

  

```Plain
nohup python main.py --start_situation 1000000001 --end_situation 1000000956 --input_file "29082025_GenMass_non_work_v2.xlsx" --max_workers 20 --batch_size 1 > situation_1000000001_1000000956.log 2> err_situation_1000000001_1000000956.log &

```

```JSON
{"status": "error", "text": "HTTPConnectionPool(host='103.253.20.30', port=3000): Max retries exceeded with url: /api/generate-learning-onion (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x00000221CA415CD0>, 'Connection to 103.253.20.30 timed out. (connect timeout=None)'))", "__request_payload__": {"inputForOnion": {"user_profile": "Full-stack Developer", "lesson": {"topic": "PH·ªêI H·ª¢P T√çCH H·ª¢P V·ªöI TEAM QA", "scenarios": [{"scenario": "C√≥ m·ªôt l·ªói l·∫° ch·ªâ x·∫£y ra tr√™n m√¥i tr∆∞·ªùng Production. B·∫°n c·∫ßn nh·ªù DevOps truy c·∫≠p server ƒë·ªÉ l·∫•y log gi√∫p b·∫°n ph√¢n t√≠ch.", "questions": ["What can I help you with?"]}, {"scenario": "C√≥ m·ªôt l·ªói l·∫° ch·ªâ x·∫£y ra tr√™n m√¥i tr∆∞·ªùng Production. B·∫°n c·∫ßn nh·ªù DevOps truy c·∫≠p server ƒë·ªÉ l·∫•y log gi√∫p b·∫°n ph√¢n t√≠ch.", "questions": ["Why do you need them?"]}, {"scenario": "C√≥ m·ªôt l·ªói l·∫° ch·ªâ x·∫£y ra tr√™n m√¥i tr∆∞·ªùng Production. B·∫°n c·∫ßn nh·ªù DevOps truy c·∫≠p server ƒë·ªÉ l·∫•y log gi√∫p b·∫°n ph√¢n t√≠ch.", "questions": ["What is the timeframe for the logs?"]}, {"scenario": "C√≥ m·ªôt l·ªói l·∫° ch·ªâ x·∫£y ra tr√™n m√¥i tr∆∞·ªùng Production. B·∫°n c·∫ßn nh·ªù DevOps truy c·∫≠p server ƒë·ªÉ l·∫•y log gi√∫p b·∫°n ph√¢n t√≠ch.", "questions": ["Do you know the specific service or container name?"]}]}}}, "internal_index": 7}
```

  

```Bash
Set-Location "D:\GIT\MiniProd_Web4_ContentEngFlow_StepUpE_T102024\1000Nghe_copyFrom_LS_ai_automation\utils_genLessonDetail1000Nghe_22082025_v2"
$env:PYTHONUTF8='1'; $env:PYTHONIOENCODING='utf-8'
$ids = @"
1000000010
1000000019
1000000055
1000000258
1000000286
1000000395
1000000410
1000000437
1000000541
1000000592
1000000638
1000000642
1000000704
1000000771
1000000825
1000000924
1000000955
"@
python .\main_run_specific_ids_parallel_and_merge.py --input_file "29082025_GenMass_non_work_v2.xlsx" --ids $ids --pool_workers 10 --per_run_max_workers 1 --output_prefix "output_pipeline_results" --merged_output "merged_all_1000000010.xlsx" --continue_on_error
```

  

**Report time gen non-work : s·ªë ch√≠nh x√°c - 708 situations:** +, time gen: 86min (10 workers do ƒë√™m n√™n em gen thong th·∫£) (20 worker nh∆∞ chi·ªÅu qua th√¨ 43min) +, Time x·ª≠ l√Ω ph√≠a sau: 1h r∆∞·ª°i = l·∫•y code t·ª´ serve => check audio -scenario - error => Gen l·∫°i => Check ph·∫ßn gen l·∫°i ouput 2 => merge output3 => ƒê·∫©y l√™n Drive cho a Tr√∫c = 1h r∆∞·ª°i. ---

=> Check update.

1. L·∫•y code t·ª´ server => Kaizen: ƒê√ìNG G√ìI M·ªåI L·ªÜNH
    

```Plain
git commit -m "[GEN MASS NON WORK - RESULTS - => L·∫ßn 4 (non work)708 situations - 10 worker - time 86.7

üìå Filtered to 708 situations (range: 1000000001 - 11000000001)

üöÄ B·∫Øt ƒë·∫ßu ch·∫°y pipeline cho 708 situations...
üßµ Parallel Processing Mode:
   Max Workers: 10
   Batch Size: 1
üöÄ Parallel Processing Setup:
   üìä Total items: 708
   üì¶ Batch size: 1
   ÔøΩÔøΩ Max workers: 10
   üìã Total batches: 708
   üíæ Memory limit: 1024MB
   üîß Adaptive mode: ‚úÖ

üéâ Parallel Processing Complete!
   ‚è±Ô∏è  Total time: 86.7 minutes
   üìä Success rate: 100.0%
   ‚ùå Errors: 0
   üîÑ Retries: 0
   üíæ Peak memory: 242.1MB
   üöÄ Throughput: 0.14 items/second
‚úÖ Pipeline xong, ƒë√£ export ra output_pipeline_results_20250829_024730.xlsx
"

git stash
git pull 
git pop stash

---
```

|                                                                     |                                                                                                     |                                                      |
| ------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| S·ªë audios b·ªã l·ªói  <br>---  <br>=IF(ISNUMBER(SEARCH("NULL",Q2)),0,1) | S·ªë Situation b·ªã l·ªói Lesson Detail b·ªã l·ªói (B·ªã thi·∫øu 1/5-6 scenario)  <br>  <br>=COUNTIF(A:A, B2) > 0 | S·ªë Situations b·ªã l·ªói  <br>---  <br>"status": "error" |
| code retry audio - done                                             | code retry openAI - done                                                                            | Ch∆∞a                                                 |


