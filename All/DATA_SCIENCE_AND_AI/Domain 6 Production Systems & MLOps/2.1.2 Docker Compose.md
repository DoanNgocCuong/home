# 1. **Phân biệt restart: always và restart: unless-stopped trong Docker Compose:**

| Thuộc tính                                                 | **always**                                                         | **unless-stopped**                                                           |
| ---------------------------------------------------------- | ------------------------------------------------------------------ | ---------------------------------------------------------------------------- |
| Khi container lỗi (exited bất thường)                      | Luôn tự động restart                                               | Luôn tự động restart                                                         |
| Khi container down do lệnh `docker restart` hoặc OS reboot | Tự động start lại khi Docker hoặc server khởi động lại             | Tự động start lại khi Docker hoặc server khởi động lại                       |
| Khi **bạn tự stop bằng `docker stop ...`**                 | **Lần sau Docker hoặc OS restart vẫn tự động start lại container** | **Lần sau Docker hoặc OS restart thì container KHÔNG tự động khởi động lại** |
| Khi dùng `docker compose down`                             | Không còn container nên không restart                              | Không còn container nên không restart                                        |

**Tóm gọn:**

- `restart: always`: Container luôn tự start lại mọi trường hợp (trừ khi bị xóa).
    
- `restart: unless-stopped`: Container sẽ luôn start lại, **trừ khi bạn từng stop thủ công**, khi đó sẽ KHÔNG tự start lại nữa cho đến khi bạn tự chạy lại nó.
    

**Khi nên dùng cái nào?**

- Nếu muốn container luôn được Docker đảm bảo hoạt động, kể cả sau stop thủ công, hãy dùng `always`.
    
- Nếu chỉ muốn container restart lại khi lỗi hoặc OS reboot, **KHÔNG phải sau khi bạn chủ động stop** (ví dụ để bảo trì), chọn `unless-stopped`.
    

1. [https://www.perplexity.ai/search/redis-hoc-ve-redis-HtFbAlR9QPWeKOnOA7dRiw](https://www.perplexity.ai/search/redis-hoc-ve-redis-HtFbAlR9QPWeKOnOA7dRiw)