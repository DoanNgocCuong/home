

![[Pasted image 20241106122454.png]]


---


Ok 👍. Dưới đây là **toàn bộ file Git Cheat Sheet** bạn đã gửi, mình đã gom lại thành một khối hoàn chỉnh, sắp xếp **từ dễ → khó**, nhưng giữ **nguyên vẹn toàn bộ text, comment, ký tự, cấu trúc code block**:

---

# 📘 Git Cheat Sheet (29/09/2025) — Sắp xếp từ dễ đến khó

---

## 1. Cất tạm file (stash)

```bash
git stash -u 
# Hoặc viết đầy đủ 
git stash --include-untracked
```

---

## 2. Git Pull

### 2.1 Commit hoặc stash code local trước khi pull

- **Commit**:
    

```bash
git add .
git commit -m "Save local changes"
git pull
```

→ Lưu lại công việc hiện tại, sau đó pull về. Nếu có xung đột thì git sẽ yêu cầu merge.

- **Stash** (nếu chưa muốn commit):
    

```bash
git stash
git pull
git stash pop
```

→ Lưu tạm thay đổi vào stash, pull xong thì lấy ra.

---

## 3. Các lệnh quay lại / reset commit

- Quay lại commit trước đó:
    

```bash
git reset --hard fff1206
```

- **Quay lại commit gần nhất (giữ hoặc xóa thay đổi):**
    

```bash
git reset --soft HEAD^   # Gỡ commit gần nhất nhưng giữ lại thay đổi (soft reset)
git reset --hard fff1206 # Gỡ commit gần nhất và loại bỏ luôn thay đổi (hard reset)
```

- `git reset --soft HEAD~1`: gỡ commit nhưng giữ thay đổi
    
- `git reset --hard HEAD`: xóa thay đổi local, quay lại commit gần nhất
    
- `git revert`: tạo commit mới đảo ngược commit cũ
    

**Khác nhau reset vs revert (ví dụ A→B→C→D):**

- `git reset --hard <commit>` → quay về A→B (cần force push)
    
- `git revert` → A→B→C→D→B’ (giữ lịch sử)
    

```bash
git reset --hard HEAD
git push --force
```

---

## 4. Git Config

- Cho phép đường dẫn dài (Windows):
    

```bash
git config --system core.longpaths true
```

---

## 5. Origin, Main, Master là gì?

- **`origin`**: Remote repository mặc định.
    
- **`main`**: Nhánh chính mặc định (hiện đại).
    
- **`master`**: Nhánh chính mặc định trước đây (đang dần thay bằng `main`).
    

Các lệnh thường gặp với `origin`:

- `git fetch origin`
    
- `git push origin main`
    

---

## 6. Đánh dấu phiên bản (Tag)

Ví dụ: demo, deploy 1.1, …

```bash
git tag -a v1_AutoQC_fromVisualizeLessonRobot_ -m "AutoQC System - Visualize Lesson Robot Integration ..."
git push origin v1_AutoQC_fromVisualizeLessonRobot
```

---

## 7. Xử lý xung đột trong VS Code

- Dấu hiệu: `<<<<<<<`, `=======`, `>>>>>>>`.
    
- Options:
    
    - Accept Current Change
        
    - Accept Incoming Change
        
    - Accept Both Changes
        
    - Compare Changes
        

---

## 8. Xóa nhánh local đã mất trên remote

### Windows (PowerShell)

```powershell
git branch -vv | Select-String ': gone]'
git branch -vv | ForEach-Object {
    if ($_ -match ': gone]') {
        $branch = ($_ -split '\s+')[1]
        git branch -D $branch
    }
}
```

### Linux / WSL

```bash
git branch -vv | grep ': gone]' | awk '{print $1}' | xargs git branch -D
```

---

## 9. Merge code cơ bản

```bash
git branch   # danh sách các nhánh cục bộ:
git branch -r  # kiểm tra nhánh remote

# Nếu nhánh chỉ tồn tại trên remote, bạn cần tải về:
git fetch origin cuong/update2024-legal2008txt 
git checkout -b cuong/update2024-legal2008txt origin/cuong/update2024-legal2008txt

# checkout sang main
git checkout main
git merge cuong/update2024_legal2008txt
```

Kéo main về nhánh hiện tại:

```bash
git pull origin main
git pull origin main --no-rebase   # Gộp commit, giữ nguyên lịch sử
git pull origin main --rebase      # Lịch sử sạch hơn
git pull origin main --ff-only     # Chỉ update nếu không có commit mới
```

Merge nhiều nhánh:

```bash
git checkout main
git merge cuong/update2024-legal2008txt
git merge DNCuong/UI

git checkout dev/DoanCuong
git pull origin main
```

---

## 10. Git Pull & Merge chuẩn

```bash
git commit -m "Save work"
git pull origin main
# resolve conflict
git add .
git commit -m "Resolve merge conflicts"
git push
```

---

## 11. Bug & Bảo mật

- **Bug `GH013: Repository rule violations found for refs/heads/main`**  
    → GitHub phát hiện vi phạm (ví dụ đẩy secret).
    

**Cách xử lý:**

- Dùng `.gitignore`
    
- Xóa commit nhạy cảm:
    

```bash
git reset --soft HEAD~1
```

- Hoặc dùng `git filter-repo`:
    

```bash
pip install git-filter-repo
git filter-repo --path utils/langfuse_demo/integration_langgraph.ipynb --invert-paths --force
git push --force destination1 refs/heads/manual-refactor-agent-registry:refs/heads/manual-refactor-agent-registry
```

- Hoặc dùng `git filter-branch`:
    

```bash
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch ver1_20250625/robot-ai-lesson/config.yml" \
  --prune-empty --tag-name-filter cat -- --all
```

|Tiêu chí|`git filter-repo`|`git filter-branch`|
|---|---|---|
|**Tốc độ**|⚡ Nhanh hơn 10-50x|🐢 Rất chậm|
|**An toàn**|✅ Tự động backup|⚠️ Dễ gây lỗi|
|**Built-in**|❌ Phải cài|✅ Có sẵn|
|**Cú pháp**|😊 Đơn giản|😵 Phức tạp|
|**Khuyến nghị**|✅ Recommended|⛔ Deprecated|

---

## 12. Gộp nhiều repo / merge nâng cao

### 12.1 Gộp repo nguồn vào repo đích

```bash
git clone https://github.com/username/source-repo.git
cd source-repo
git remote add destination https://github.com/username/destination-repo.git
git push --force destination origin/deploy:main
```

### 12.2 Hợp nhất lịch sử không liên quan

```bash
git pull --no-rebase destination main --allow-unrelated-histories
git merge other-branch --allow-unrelated-histories
git add .
git commit -m "Resolved merge conflicts"
```

### 12.3 Copy nhánh giữa 2 repo (GitKraken)

```bash


# GỘP 1 REPO VÀO 1 NHÁNH CỦA 1 REPO --- GỘP 1 REPO VÀO 1 NHÁNH CỦA 1 REPO SAU ĐÓ HỢP NHẤT, MERGER VÀO MAIN

# BẮT ĐẦU TỪ REPO NGUỒN. 

git clone https://github.com/username/source-repo.git
cd source-repo

git remote add destination https://github.com/Hngdcmnh/content-the-coach
git remote add destination https://github.com/DoanNgocCuong/robot-lesson-workflow_stepUpEducation_22092025

## push the current branch origin/deploy to the destination branch main of the destination repo
# git push destination origin/deploy:main
## ghi đè
# git push --force destination origin/deploy:main

# or full ref name 
git push --force destination refs/heads/main:refs/heads/destination_branch
git push --force destination refs/heads/manual-refactor-agent-registry:refs/heads/manual-refactor-agent-registry

# đến đây là đẩy sang repo đích rồi 

# --- SANG REPO ĐÍCH / LÀ LÊN GITHUB MERGER---
git clone https://github.com/username/destination-repo.git
# **Kéo (pull) những thay đổi từ repo đích vào repo hiện tại**: 
# Điều này đảm bảo rằng bạn có tất cả các thay đổi mới nhất từ repo đích trước khi đẩy lên, tránh ghi đè.
git pull --no-rebase destination main --allow-unrelated-histories

git checkout main

# Lỗi "fatal: refusing to merge unrelated histories" xảy ra khi bạn cố gắng hợp nhất hai nhánh mà không có lịch sử chung. Điều này thường xảy ra khi hai nhánh được khởi tạo từ các kho lưu trữ khác nhau hoặc khi một nhánh được tạo mới mà không có bất kỳ commit nào từ nhánh gốc. Để giải quyết vấn đề này, bạn có thể sử dụng tùy chọn `--allow-unrelated-histories` để cho phép hợp nhất các lịch sử không liên quan:
git merge aPartGenspark_wantMerge --allow-unrelated-histories
# Xử lý xung đột nếu có, sau đó thêm và commit
git add .
git commit -m "Resolved merge conflicts"



```

Lúc này check remote bạn sẽ thấy: 

```bash
PS D:\GIT\robot-lesson-workflow> git remote -v
destination     https://github.com/DoanNgocCuong/robot-lesson-workflow_stepUpEducation_22092025 (fetch)
destination     https://github.com/DoanNgocCuong/robot-lesson-workflow_stepUpEducation_22092025 (push)
destination1    https://github.com/DoanNgocCuong/Refactored_CFO_Multi-AI-Agent_LangchainLanggraph_T10_2025 (fetch)
destination1    https://github.com/DoanNgocCuong/Refactored_CFO_Multi-AI-Agent_LangchainLanggraph_T10_2025 (push)
upstream        https://github.com/IsProjectX/robot-lesson-workflow.git (fetch)
upstream        https://github.com/IsProjectX/robot-lesson-workflow.git (push)
PS D:\GIT\robot-lesson-workflow> 
```
---

## 13. Ghi chú hình ảnh

![[Pasted image 20241106122454.png]]

---

Bạn có muốn mình làm thêm **mục lục (TOC) dạng link nhảy** ở đầu file để click tới từng phần không?

